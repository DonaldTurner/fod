/*! FunnyOrDie: v1.0.0 (webpack: v1.11.0) */
!function(e){function t(s){if(i[s])return i[s].exports;var n=i[s]={exports:{},id:s,loaded:!1};return e[s].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";var s,n=i(5),o=i(3),a=i(1),r=i(4),c=i(12);n.addListeners({load:function(){window.parent.postMessage("show","*"),o.init([i(27),i(28),i(14),i(23),i(13)])},done:function(){var e=document.createElement("iframe");e.src="about:blank",e.style.display="none",s=i(22),c.authorize(function(e){e&&gSTB.SaveUserData(r.userDataFileName,JSON.stringify(r.userConfig)),o.navigate("pageService")}),document.body.appendChild(e),window.XMLHttpRequest=e.contentWindow.XMLHttpRequest},keydown:function(e){switch(e.code){case a.volumeDown:case a.volumeUp:case a.mute:s.changeVolume(e.code);break;case 2085:gSTB.GetStandByStatus()?gSTB.StandBy(!1):(gSTB.StandBy(!0),o.navigate("pageMenu"),location.reload());break;case a.exit:window.parent===window?o.navigate("pageService"):window.parent.postMessage("hide","*")}}})},function(e,t,i){"use strict";e.exports={back:8,"delete":46,channelPrev:1009,channelNext:9,ok:13,exit:27,up:38,down:40,left:37,right:39,pageUp:33,pageDown:34,end:35,home:36,volumeUp:107,volumeDown:109,f1:112,f2:113,f3:114,f4:115,refresh:116,frame:117,phone:119,set:120,tv:121,menu:122,web:123,mic:2032,rewind:2066,forward:2070,app:2076,usbMounted:2080,usbUnmounted:2081,playPause:2082,stop:2083,power:2085,record:2087,info:2089,mute:2192,clock:2032,audio:2071,keyboard:2076}},function(e,t,i){"use strict";function s(e){var t,i=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,n.call(this,e.data),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className+=" component "+(e.className||""),this.id=e.id||this.$node.id||"cid"+a++,e.parent&&e.parent.add(this),e.visible===!1&&this.hide(),e.focusable===!1&&(this.focusable=!1),this.defaultEvents){e.events=e.events||{};for(t in this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t]}e.events&&this.addListeners(e.events),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){0===e.button&&(i.focus(),i.events.click&&i.emit("click",{event:e})),e.stopPropagation()})}var n=i(7),o=i(3),a=0;s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.defaultEvents=null,s.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),this.events.add&&this.emit("add",{item:e})},s.prototype.remove=function(){this.parent&&(o.current.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.removeAllListeners(),this.$node.parentNode.removeChild(this.$node),this.events.remove&&this.emit("remove")},s.prototype.focus=function(e){var t=o.current,i=t.activeComponent;return this.focusable&&this!==i?(i&&i.blur(),t.activeComponent=i=this,i.$node.classList.add("focus"),i.events.focus&&i.emit("focus",e),!0):!1},s.prototype.blur=function(){var e=o.current,t=e.activeComponent;return this.$node.classList.remove("focus"),this===t?(e.activeComponent=null,this.events.blur&&this.emit("blur"),!0):!1},s.prototype.show=function(e){return this.visible?!0:(this.$node.classList.remove("hidden"),this.visible=!0,this.events.show&&this.emit("show",e),!0)},s.prototype.hide=function(){return this.visible?(this.$node.classList.add("hidden"),this.visible=!1,this.events.hide&&this.emit("hide"),!0):!0},e.exports=s},function(e,t,i){"use strict";var s,n=i(7);s=new n,s.current=null,s.history=[],s.pages=[],s.ids={},s.init=function(e){var t,i,s;if(e){for(this.pages=[],this.pages=e,t=0,i=e.length;i>t;t++)s=e[t],this.ids[s.id]=s,s.active&&(this.current=s);return this.events.init&&this.emit("init",{pages:e}),!0}return!1},s.parse=function(e){var t={name:"",data:[]};return t.data=e.split("/").map(decodeURIComponent),t.name=t.data.shift().slice(1),t},s.stringify=function(e,t){return t=Array.isArray(t)?t:[],e=encodeURIComponent(e),t=t.map(encodeURIComponent),t.unshift(e),t.join("/")},s.show=function(e,t){return e&&!e.active?(e.$node.classList.add("active"),e.active=!0,this.current=e,e.events.show&&e.emit("show",{page:e,data:t}),!0):!1},s.hide=function(e){return e&&e.active?(e.$node.classList.remove("active"),e.active=!1,this.current=null,e.events.hide&&e.emit("hide",{page:e}),!0):!1},s.navigate=function(e,t){var i=this.current,s=this.ids[e];return s&&!s.active?(location.hash=this.stringify(e,t),this.hide(this.current),this.show(s,t),this.events.navigate&&this.emit("navigate",{from:i,to:s}),this.history.push(s),!0):!1},s.back=function(){var e,t;return this.history.length>1&&(e=this.history.pop(),t=this.history[this.history.length-1],t&&!t.active)?(location.hash=t.id,this.hide(this.current),this.show(t),this.events.navigate&&this.emit("navigate",{from:e,to:t}),!0):!1},e.exports=s},function(e,t){"use strict";e.exports={userDataFileName:"fod.json",movieList:{perLine:3},dataProviderType:{TYPE_SERVICE:1,TYPE_SEARCH:2,TYPE_HISTORY:3,TYPE_FAVORITE:4},proxyServer:"",volume:100,singleMode:{active:!0,name:"Funny or die"},userConfig:{}}},function(e,t,i){"use strict";var s,n,o=i(30),a=i(3),r=i(1),c={};i(33),window.parent&&window.parent.gSTB&&(window.dvbManager=window.parent.dvbManager,window.epgManager=window.parent.epgManager,window.gSTB=window.parent.gSTB,window.pvrManager=window.parent.pvrManager,window.stbDownloadManager=window.parent.stbDownloadManager,window.stbStorage=window.parent.stbStorage,window.stbUpdate=window.parent.stbUpdate,window.stbUPnP=window.parent.stbUPnP,window.stbWebWindow=window.parent.stbWebWindow,window.stbWindowMgr=window.parent.stbWindowMgr,window.timeShift=window.parent.timeShift),s=new o({debug:!1,host:!0,screen:null,time:{init:+new Date,load:0,done:0}}),s.setScreen=function(e){var t;return e?(e.availHeight=e.height-(e.availTop+e.availBottom),e.availWidth=e.width-(e.availLeft+e.availRight),window.moveTo(0,0),window.resizeTo(e.width,e.height),t=document.querySelector("link[rel=stylesheet]"),t&&t instanceof HTMLLinkElement&&document.head.removeChild(t),t=document.createElement("link"),t.rel="stylesheet",t.href="css/release."+e.height+".css?"+ +new Date,document.head.appendChild(t),this.data.metrics=e,!0):!1},s.EVENT_END_OF_FILE=1,s.EVENT_GET_MEDIA_INFO=2,s.EVENT_PLAYBACK_BEGIN=4,s.EVENT_CONTENT_ERROR=5,s.EVENT_DUAL_MONO_DETECT=6,s.EVENT_INFO_GET=7,s.EVENT_SUBTITLE_LOAD_ERROR=8,s.EVENT_SUBTITLE_FIND=9,s.EVENT_HDMI_CONNECT=32,s.EVENT_HDMI_DISCONNECT=33,s.EVENT_RECORD_FINISH_SUCCESSFULL=34,s.EVENT_RECORD_FINISH_ERROR=35,s.EVENT_DVB_SCANING=40,s.EVENT_DVB_FOUND=41,s.EVENT_DVB_CHANELL_EPG_UPDATE=42,s.EVENT_DVB_ANTENNA_OFF=43,s.setScreen(i(37)[screen.height]);for(n in r)"volumeUp"!==n&&"volumeDown"!==n&&(c[r[n]]=!0);window.addEventListener("load",function(e){s.data.time.load=e.timeStamp,s.events[e.type]&&s.emit(e.type,e),a.pages.forEach(function(t){t.events[e.type]&&t.emit(e.type,e)}),s.data.time.done=+new Date,s.events.done&&s.emit("done",e)}),window.addEventListener("unload",function(e){s.events[e.type]&&s.emit(e.type,e),a.pages.forEach(function(t){t.events[e.type]&&t.emit(e.type,e)})}),window.addEventListener("error",function(e){}),window.addEventListener("keydown",function(e){var t,i=a.current;0!==e.keyCode&&(e.code=e.keyCode,e.shiftKey&&(e.code+=1e3),e.altKey&&(e.code+=2e3),t=i.activeComponent,t&&t!==i&&(t.events[e.type]&&t.emit(e.type,e),!e.stop&&t.propagate&&t.parent&&t.parent.events[e.type]&&t.parent.emit(e.type,e)),e.stop||i.events[e.type]&&i.emit(e.type,e),e.stop||s.events[e.type]&&s.emit(e.type,e),s.data.host&&c[e.code]&&e.preventDefault())}),window.addEventListener("keypress",function(e){var t=a.current;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e)}),window.addEventListener("click",function(e){}),window.addEventListener("contextmenu",function(e){e.preventDefault()}),window.addEventListener("mousewheel",function(e){var t=a.current;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e),e.stop||t.events[e.type]&&t.emit(e.type,e)}),window.stbEvent={},window.stbEvent.onEvent=function(e,t){if(s.events.media){if(t)try{t=JSON.parse(t)}catch(i){}s.emit("media",{code:parseInt(e,10),info:t})}},window.stbEvent.onBroadcastMessage=function(e,t,i){s.events.message&&s.emit("message",{broadcast:!0,windowId:e,message:t,data:i})},window.stbEvent.onMessage=function(e,t,i){s.events.message&&s.emit("message",{broadcast:!1,windowId:e,message:t,data:i})},window.stbEvent.onMount=function(e){s.events["device:mount"]&&s.emit("device:mount",{state:e})},window.stbEvent.onMediaAvailable=function(){s.events["media:available"]&&s.emit("media:available")},window.stbEvent.onNetworkStateChange=function(e){s.events["internet:state"]&&s.emit("internet:state",{state:e})},window.stbEvent.onWebBrowserProgress=function(e){s.events["browser:progress"]&&s.emit("browser:progress",{progress:e})},window.stbEvent.onWindowActivated=function(){s.events["window:focus"]&&s.emit("window:focus")},window.gSTB&&gSTB.SetNativeStringMode&&gSTB.SetNativeStringMode(!0),e.exports=s},function(e,t){"use strict";e.exports={global:{ROOT:1,CATEGORY:2,FOLDER:3,MOVIE:4,FILE:5,SEARCH:6},system:{ROOT:1,ALL_VIDEOS:2,CELEBRITY_LIST:3,HALL_OF_FAME:4,VIDEO_LIST:5,VIDEO:6,SEARCH:7}}},function(e,t,i){"use strict";function s(){this.events={}}s.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var i=this;this.events[e]=this.events[e]||[],this.events[e].push(function s(n){t(n),i.removeListener(e,s)})},addListeners:function(e){var t;if("object"==typeof e)for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},removeAllListeners:function(e){0===arguments.length?this.events={}:e&&(this.events[e]=void 0)},emit:function(e,t){var i,s=this.events[e];if(s)for(i=0;i<s.length;i++)s[i].call(this,t)}},s.prototype.constructor=s,e.exports=s},function(e,t,i){"use strict";function s(e){e=e||{},e.className="button "+(e.className||""),n.call(this,e),e.icon&&(this.$icon=this.$body.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),this.$text=this.$body.appendChild(document.createElement("div")),this.$text.classList.add("text"),e.value&&(this.$text.innerText=e.value)}var n=i(2),o=i(1);s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.clickDuration=200,s.prototype.defaultEvents={click:function(){var e=this;this.$node.classList.add("click"),setTimeout(function(){e.$node.classList.remove("click")},this.clickDuration)},keydown:function(e){e.code===o.ok&&this.events.click&&this.emit("click",{event:e})}},e.exports=s},function(e,t,i){"use strict";function s(e){e=e||{},this.active=!1,this.activeComponent=null,e.className="page "+(e.className||""),n.call(this,e),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}var n=i(2);s.prototype=Object.create(n.prototype),s.prototype.constructor=s,e.exports=s},function(e,t,i){"use strict";function s(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue}function n(e,t){var i,s,n;if(t=t||{},e&&("string"==typeof e||e instanceof String)&&e.length>0){if(t&&"object"==typeof t)for(i=0;i<h.length;i++)void 0===t[h[i]]&&(t[h[i]]=c[h[i]]);if(n=new XMLHttpRequest,n.open(t.method,e,t.async),t.headers&&"object"==typeof t.headers)for(s=Object.keys(t.headers),i=0;i<s.length;i++)n.setRequestHeader(s[i],t.headers[s[i]]);return n.responseType=t.type,n.timeout=t.timeout,t.onload&&"function"==typeof t.onload&&(n.onload=function(){t.onload.call(this,this.response||this.responseText,this.status)}),n.onerror=t.onerror,n.ontimeout=t.ontimeout,n.send(t.data?JSON.stringify(t.data):null),n}return!1}var o={},a=i(6),r=i(29),c={method:"GET",async:!0,headers:{},type:"text",data:null,timeout:3e4,onload:null,onerror:null,ontimeout:null},l="/s=w320,pd1/o=85/",d="s=w320",h=Object.keys(c);o.root={title:"Funny or die",url:"www.funnyordie.com",img:"",type:a.global.ROOT,system:{type:a.system.ROOT,search:[]},searchable:!1},o.getNext=function(e,t){var i,o;switch(e.page++,e.system.type){case a.system.ROOT:if(e.page>0)return void t(!1,[]);t(!1,r.main);break;case a.system.CELEBRITY_LIST:if(e.page>0)return void t(!1,[]);t(!1,r.celebrities);break;case a.system.VIDEO_LIST:i=e.url,e.page>0&&e.nextLink&&(i=e.nextLink.substring(0,e.nextLink.indexOf("page=")+5)+(e.page+1)+"&_fod_source=scroll"),o=function(i){var n,o,r,c,h,p,u,m,f=!1,v=[];if(e.page>0&&!e.nextLink)return void t(f,[]);if(n=i.split('class="js-infinite-container')[1],void 0===n)return void t(f,[]);for(n=n.split('<article class="video-preview'),o=1;o<n.length;o++)r=n[o].split('<a title="')[1],h=r.substring(r.indexOf('href="')+6,r.indexOf('"><img')),r=r.substring(0,r.indexOf('" href="')),c=n[o].split('<img class="media-preview-thumbnail')[1],m=n[o].split('<div class="funny-bar" style="width: ')[1],m&&(m=m.substring(0,m.indexOf('%;"'))),c.indexOf("js-resrc-lazy")>0?(c=c.split('data-src="')[1],u=c.indexOf("/http"),c=c.slice(0,u)+l+c.slice(u)):(c=c.split('src="')[1],c.indexOf("s=w800")>0&&(c=c.replace("s=w800",d))),c=c.substring(0,c.indexOf('"')),v.push({title:s(r),url:"http://www.funnyordie.com"+h,img:c,likeBar:m,type:a.global.MOVIE,system:{type:a.system.VIDEO}}),p=i.split('<a class="infinite-more-link')[1],p&&(p="http://www.funnyordie.com"+p.substring(p.indexOf('href="')+6,p.indexOf('">More')),p=s(p),e.nextLink=p);t(f,v)},n(i,{onload:o});break;case a.system.ALL_VIDEOS:i=e.url,e.page>0&&e.nextLink&&(i=e.nextLink.substring(0,e.nextLink.indexOf("all_time/")+9)+(e.page+1)+"&_fod_source=scroll"),o=function(i){var n,o,r,c,h,p,u,m,f=!1,v=[];if(n=i.split('class="js-infinite-container')[1],void 0===n)return void t(f,[]);for(n=n.split('<article class="video-preview'),o=1;o<n.length;o++)r=n[o].split('<a title="')[1],h=r.substring(r.indexOf('href="')+6,r.indexOf('"><img')),r=r.substring(0,r.indexOf('" href="')),c=n[o].split('<img class="media-preview-thumbnail')[1],m=n[o].split('<div class="funny-bar" style="width: ')[1],m&&(m=m.substring(0,m.indexOf('%;"'))),c.indexOf("js-resrc-lazy")>0?(c=c.split('data-src="')[1],u=c.indexOf("/http"),c=c.slice(0,u)+l+c.slice(u)):(c=c.split('src="')[1],c.indexOf("s=w800")>0&&(c=c.replace("s=w800",d))),c=c.substring(0,c.indexOf('"')),v.push({title:s(r),url:"http://www.funnyordie.com"+h,img:c,type:a.global.MOVIE,likeBar:m,system:{type:a.system.VIDEO}}),p=i.split('<a class="infinite-more-link')[1],p&&(p="http://www.funnyordie.com"+p.substring(p.indexOf('href="')+6,p.indexOf('">More')),p=s(p),e.nextLink=p);t(f,v)},n(i,{onload:o});break;case a.system.SEARCH:i=e.url,e.page>0&&e.nextLink&&(i=e.nextLink.slice(0,e.nextLink.indexOf("page=")+5)+(e.page+1)+e.nextLink.slice(e.nextLink.indexOf("page=")+6)),o=function(i){var n,o,r,c,h,p,u,m,f=!1,v=[];if(n=i.split('class="js-infinite-container')[1],void 0===n)return void t(f,[]);for(n=n.split('<article class="video-preview'),o=1;o<n.length;o++)r=n[o].split('<a title="')[1],h=r.substring(r.indexOf('href="')+6,r.indexOf('">')),r=r.substring(0,r.indexOf('" href="')),c=n[o].split('<img class="media-preview-thumbnail')[1],m=n[o].split('<div class="funny-bar" style="width: ')[1],m&&(m=m.substring(0,m.indexOf('%;"'))),c.indexOf("js-resrc-lazy")>0?(c=c.split('data-src="')[1],u=c.indexOf("/http"),c=c.slice(0,u)+l+c.slice(u)):(c=c.split('src="')[1],c.indexOf("s=w800")>0&&(c=c.replace("s=w800",d))),c=c.substring(0,c.indexOf('"')),v.push({title:s(r),url:"http://www.funnyordie.com"+h,likeBar:m,img:c,type:a.global.MOVIE,system:{type:a.system.VIDEO}}),p=i.split('<a class="infinite-more-link')[1],p&&(p="http://www.funnyordie.com"+p.substring(p.indexOf('href="')+6,p.indexOf('">More')),p=s(p),e.nextLink=p);t(f,v)},n(i,{onload:o});break;case a.system.VIDEO:i=e.url,o=function(e){var i,s,n,o,r=!1;i=e.split("FOD.player.src('")[1],i?i=i.substring(0,i.indexOf("')")):r=!0,n=e.split('<div id="more-info-data-content"')[1],n=n.split('<div class="more-info-line">'),s=e.split(' itemprop="name"')[1],s=s.substring(s.indexOf('">')+2,s.indexOf("</a>")),o=e.split('<track kind="captions"')[1],o&&(o=o.substring(o.indexOf('src="')+5,o.indexOf('" srclang')),o="http://www.funnyordie.com"+o),t(r,{url:i,title:s,type:a.global.FILE,likes:n[1].slice(0,n[1].indexOf("</div>")),dislikes:n[2].slice(0,n[2].indexOf("</div>")),views:n[3].slice(0,n[3].indexOf("</div>")),date:n[4].slice(0,n[4].indexOf("</div>")),subtitle:o})},n(i,{onload:o})}},o.getPrev=function(e,t){var i,o;if(e.page<0)return void t(!1,[]);switch(e.system.type){case a.system.ROOT:if(e.page>0)return void t(!1,[]);t(!1,r.main);break;case a.system.CELEBRITY_LIST:if(e.page>0)return void t(!1,[]);t(!1,r.celebrities);break;case a.system.VIDEO_LIST:i=e.url,e.page>0&&e.nextLink&&(i=e.nextLink.substring(0,e.nextLink.indexOf("page=")+5)+(e.page+1)+"&_fod_source=scroll"),o=function(i){var n,o,r,c,h,p,u,m,f=!1,v=[];if(e.page>0&&!e.nextLink)return void t(f,[]);if(n=i.split('class="js-infinite-container')[1],void 0===n)return void t(f,[]);for(n=n.split('<article class="video-preview'),o=1;o<n.length;o++)r=n[o].split('<a title="')[1],h=r.substring(r.indexOf('href="')+6,r.indexOf('"><img')),r=r.substring(0,r.indexOf('" href="')),c=n[o].split('<img class="media-preview-thumbnail')[1],m=n[o].split('<div class="funny-bar" style="width: ')[1],m&&(m=m.substring(0,m.indexOf('%;"'))),c.indexOf("js-resrc-lazy")>0?(c=c.split('data-src="')[1],u=c.indexOf("/http"),c=c.slice(0,u)+l+c.slice(u)):(c=c.split('src="')[1],c.indexOf("s=w800")>0&&(c=c.replace("s=w800",d))),c=c.substring(0,c.indexOf('"')),v.push({title:s(r),url:"http://www.funnyordie.com"+h,img:c,likeBar:m,type:a.global.MOVIE,system:{type:a.system.VIDEO}}),p=i.split('<a class="infinite-more-link')[1],p&&(p="http://www.funnyordie.com"+p.substring(p.indexOf('href="')+6,p.indexOf('">More')),p=s(p),e.nextLink=p);t(f,v)},n(i,{onload:o});break;case a.system.ALL_VIDEOS:i=e.url,e.page>0&&e.nextLink&&(i=e.nextLink.substring(0,e.nextLink.indexOf("all_time/")+9)+(e.page+1)+"&_fod_source=scroll"),o=function(i){var n,o,r,c,h,p,u,m,f=!1,v=[];if(n=i.split('class="js-infinite-container')[1],void 0===n)return void t(f,[]);for(n=n.split('<article class="video-preview'),o=1;o<n.length;o++)r=n[o].split('<a title="')[1],h=r.substring(r.indexOf('href="')+6,r.indexOf('"><img')),r=r.substring(0,r.indexOf('" href="')),c=n[o].split('<img class="media-preview-thumbnail')[1],m=n[o].split('<div class="funny-bar" style="width: ')[1],m&&(m=m.substring(0,m.indexOf('%;"'))),c.indexOf("js-resrc-lazy")>0?(c=c.split('data-src="')[1],u=c.indexOf("/http"),c=c.slice(0,u)+l+c.slice(u)):(c=c.split('src="')[1],c.indexOf("s=w800")>0&&(c=c.replace("s=w800",d))),c=c.substring(0,c.indexOf('"')),v.push({title:s(r),url:"http://www.funnyordie.com"+h,img:c,type:a.global.MOVIE,likeBar:m,system:{type:a.system.VIDEO}}),p=i.split('<a class="infinite-more-link')[1],p&&(p="http://www.funnyordie.com"+p.substring(p.indexOf('href="')+6,p.indexOf('">More')),p=s(p),e.nextLink=p);t(f,v)},n(i,{onload:o});break;case a.system.SEARCH:i=e.url,e.page>0&&e.nextLink&&(i=e.nextLink.slice(0,e.nextLink.indexOf("page=")+5)+(e.page+1)+e.nextLink.slice(e.nextLink.indexOf("page=")+6)),o=function(i){var n,o,r,c,h,p,u,m,f=!1,v=[];if(n=i.split('class="js-infinite-container')[1],void 0===n)return void t(f,[]);for(n=n.split('<article class="video-preview'),o=1;o<n.length;o++)r=n[o].split('<a title="')[1],h=r.substring(r.indexOf('href="')+6,r.indexOf('">')),r=r.substring(0,r.indexOf('" href="')),c=n[o].split('<img class="media-preview-thumbnail')[1],m=n[o].split('<div class="funny-bar" style="width: ')[1],m&&(m=m.substring(0,m.indexOf('%;"'))),c.indexOf("js-resrc-lazy")>0?(c=c.split('data-src="')[1],u=c.indexOf("/http"),c=c.slice(0,u)+l+c.slice(u)):(c=c.split('src="')[1],c.indexOf("s=w800")>0&&(c=c.replace("s=w800",d))),c=c.substring(0,c.indexOf('"')),v.push({title:s(r),url:"http://www.funnyordie.com"+h,likeBar:m,img:c,type:a.global.MOVIE,system:{type:a.system.VIDEO}}),p=i.split('<a class="infinite-more-link')[1],p&&(p="http://www.funnyordie.com"+p.substring(p.indexOf('href="')+6,p.indexOf('">More')),p=s(p),e.nextLink=p);t(f,v)},n(i,{onload:o});break;case a.system.VIDEO:i=e.url,o=function(e){var i,s,n,o;i=e.split("FOD.player.src('")[1],i=i.substring(0,i.indexOf("')")),n=e.split('<div id="more-info-data-content"')[1],n=n.split('<div class="more-info-line">'),s=e.split(' itemprop="name"')[1],s=s.substring(s.indexOf('">')+2,s.indexOf("</a>")),o=e.split('<track kind="captions"')[1],o&&(o=o.substring(o.indexOf('src="')+5,o.indexOf('" srclang')),o="http://www.funnyordie.com"+o),t(!1,{url:i,title:s,type:a.global.FILE,likes:n[1].slice(0,n[1].indexOf("</div>")),dislikes:n[2].slice(0,n[2].indexOf("</div>")),views:n[3].slice(0,n[3].indexOf("</div>")),date:n[4].slice(0,n[4].indexOf("</div>")),subtitle:o})},n(i,{onload:o})}e.page--},o.getCursor=function(e,t){var i=!1,s=e.item.system.type,n=e.item.url;e=e||{},e.searchText&&(s=a.system.SEARCH,n="http://www.funnyordie.com/search/a/videos?page=1&query="+e.searchText),e.sortType&&(n=e.sortType.url),t(i,{page:-1,url:n,system:{type:s}})},o.getInfo=function(e,t){t(e)},e.exports=o},function(e,t,i){"use strict";function s(e){e=e||{},e.focusable=e.focusable||!1,e.className="panel "+(e.className||""),n.call(this,e)}var n=i(2);s.prototype=Object.create(n.prototype),s.prototype.constructor=s,e.exports=s},function(e,t,i){"use strict";var s,n={profile:{},playback:{},token:void 0,favorite:{data:[]}},o="http://api.freemultiplex.com/v1/",a=i(4),r=i(15);n.authorize=function(e){var t=gSTB.LoadUserData(a.userDataFileName);""===t?r.ajax(o+"session",{onload:function(t){var i=JSON.parse(t);200===i.code?(n.token=i.data.sid,a.userConfig.multiplexToken=n.token,gSTB.SaveUserData(a.userDataFileName,JSON.stringify(a.userConfig)),e(),n.isAuthorize=!0,n.profile.save({playNext:!0,buffer:5})):(n.isAuthorize=!1,e())},onerror:function(){e()},timeout:6e3}):(n.token=JSON.parse(t).multiplexToken,n.profile.load(function(){e(),n.isAuthorize=!0}))},n.profile.load=function(e){var t;s=i(22),r.ajax(o+"profile",{onload:function(i){var n;if(t=JSON.parse(i),null===i.info)return void(e&&e());if(200===t.code){if(t.data.info.volume){a.volume=t.data.info.volume;try{s.setValue(a.volume)}catch(o){}}n=Math.floor(768*a.bufferSize*1e3),gSTB.SetBufferSize(1e3*a.bufferSize,n)}e&&e(i)},onerror:function(){e&&e()},method:"GET",headers:{Authorization:n.token},timeout:6e3})},n.profile.save=function(e,t){void 0===e&&(e={volume:a.volume}),r.ajax(o+"profile",{onload:function(e){t&&t()},timeout:6e3,method:"PUT",data:e,headers:{"Content-Type":"application/json",Authorization:n.token}})},n.playback.send=function(e){n.isAuthorize&&r.ajax(o+"history/playback",{method:"POST",timeout:6e3,data:e,headers:{"Content-Type":"application/json",Authorization:n.token},onload:function(e){200===JSON.parse(e).code}})},n.playback.load=function(e){n.isAuthorize&&r.ajax(o+"history/playback",{method:"GET",headers:{Authorization:n.token},timeout:6e3,onload:function(t){var i=JSON.parse(t);200!==i.code||e(i.data)},onerror:function(){}})},n.favorite.send=function(e,t){n.isAuthorize&&r.ajax(o+"favorites/media",{method:"POST",data:e,timeout:6e3,headers:{"Content-Type":"application/json",Authorization:n.token},onload:function(e){200===JSON.parse(e).code,t()},onerror:function(){t()}})},n.favorite.load=function(e,t){n.isAuthorize&&r.ajax(o+"favorites/media?info.categoryId="+e,{method:"GET",headers:{Authorization:n.token},timeout:6e3,onload:function(e){var i=JSON.parse(e);200!==i.code||t(i.data)}})},n.favorite.checkState=function(e,t){return n.isAuthorize?void r.ajax(o+"favorites/media?info.id="+e,{method:"GET",headers:{Authorization:n.token},timeout:6e3,onload:function(e){var i=JSON.parse(e);200!==i.code?t(null):0!==i.data.length?t(!0,i.data[0].id):t(!1)},onerror:function(){t(null)}}):void t(null)},n.favorite.deleteItem=function(e,t){return n.isAuthorize?void r.ajax(o+"favorites/media/"+e,{method:"DELETE",headers:{Authorization:n.token},timeout:6e3,onload:function(e){var i=JSON.parse(e);t(200===i.code?!0:!1)},onerror:function(){t(!1)}}):void t(!1)},e.exports=n},function(e,t,i){"use strict";var s,n,o="pageSearch",a=document.getElementById(o),r=i(9),c=new r({$node:a}),l=i(3),d=i(1),h=i(21),p=i(19),u=i(20),m=i(16),f=i(8),v=i(17),y=i(11),g=new v({visible:!1,events:{show:function(){g.okBtn.focus()},hide:function(){n.focus()}}}),w=document.getElementById("pageSearchStory"),b=document.createElement("span");c.addListener("load",function(){w.innerText="Search history ",b.classList.add("searchType"),w.appendChild(b),n=new f({$node:document.getElementById("pageSearchStoryClear"),value:"Clear history"}),c.add(n),n.addListener("keydown",function(e){switch(e.code){case d.up:p.input.focus();break;case d.down:s?s.focus():u.keys.focus()}}),n.addListener("click",function(){g.show()}),p.input.addListener("keydown",function(e){e.code===d.down&&"pageSearch"===l.current.id&&n.focus()}),c.add(g),g.add(g.title=new y),g.title.$body.innerText="Clear search history ?",g.add(g.okBtn=new f({value:"Clear",events:{keydown:function(e){switch(f.prototype.defaultEvents.keydown.call(this,e),e.code){case d.right:g.cancelBtn.focus();break;case d.back:case d.exit:g.hide(),e.stop=!0}},click:function(){h.clearStorage(function(e){e?c.initSearch(function(){n.focus(),g.hide()}):g.hide()})}}})),g.add(g.cancelBtn=new f({value:"Cancel",events:{keydown:function(e){switch(f.prototype.defaultEvents.keydown.call(this,e),e.code){case d.left:g.okBtn.focus();break;case d.back:case d.exit:g.hide(),e.stop=!0}},click:function(){g.hide()}}}))}),c.addListener("show",function(){c.add(u),c.add(p),p.show(),u.show(),u.showBg(0),u.keys.focus(),u.keys.focusItem(u.keys.map[2][5]),u.overflowTop(function(){s?s.focus():n.focus()}),u.button.addListener("keydown",function(e){e.code===d.up&&("pageSearch"===l.current.id?s?(s.focus(),s.focusItem(s.map[4][1])):n.focus():"pageVideoList"===l.current.id&&p.input.focus())})}),c.addListener("keydown",function(e){switch(e.code){case d.back:case d.exit:u.hide(),p.hide(),l.navigate("pageService")}}),c.initSearch=function(e){u.searchObj=i(10).root,h.getData(function(e){var t=e;if(null!==t){if(s)try{s.remove(),s=null}catch(i){}s=new m({data:t,cycleY:!1,render:function(e,t){var i=document.createElement("span");i.innerText=t.value,e.appendChild(i)}}),c.add(s),s.addListener("overflow",function(e){switch(e.direction){case d.up:n.focus();break;case d.down:u.keys.focus()}}),s.addListener("click:item",function(e){p.setValue(e.$item.data.value),u.button.focus()})}else if(s)try{s.remove(),s=null}catch(i){}}),e()},e.exports=c},function(e,t,i){"use strict";function s(e){if(e.$item.y>1)return this.emit("keydown",{code:v.down}),void this.focusItem(this.map[1][e.$item.x]);if(e.$item.y<1)return this.emit("keydown",{code:v.up}),void this.focusItem(this.map[1][e.$item.x]);switch(e.$item.movieObj.type){case x.FOLDER:window.breadcrumb.push(e.$item.movieObj.title),B.innerText=window.breadcrumb.join(" | "),l.hide(),d=new O({item:{item:e.$item.movieObj},size:y.data.metrics.movieCount,plugin:k}),d.addListener("preload",function(e){e.array.forEach(function(e){e.value&&e.value.img&&g.add([e.value.img])})}),c=new b({provider:d,focusable:!0,cycleY:!1,sizeX:y.data.metrics.movieCount,sizeY:3,render:n,events:{keydown:o,"data:ready":function t(){setTimeout(function(){c.focusItem(c.map[1][0]),c.removeListener("data:ready",t)},4)},mousewheel:function(e){e.deltaY>0?this.emit("keydown",{code:v.down}):this.emit("keydown",{code:v.up})},"click:item":s}}),r.add(c),P.push(c),c.focus(),a.show();break;case x.MOVIE:D.play({content:c.$focusItem.movieObj})}}function n(e,t){var i,s,n=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div");e.ready?(e.img.style.backgroundImage="url("+t.value.img+")",e.txt.innerText=t.value.title,e.movieObj=t.value,t.value.invisible?(e.classList.add("invisible"),e.data.disable=!0):(e.classList.remove("invisible"),e.data.disable=!1),t.value.likeBar&&(e.likes.style.width=t.value.likeBar+"%")):(o.classList.add("cover"),o.style.backgroundImage="url("+t.value.img+")",i=document.createElement("div"),i.className="likeBar",s=document.createElement("div"),s.style.width=t.value.likeBar+"%",i.appendChild(s),o.appendChild(i),e.likes=s,e.likeBar=i,n.className="movieItem",a.className="movieDescription",r.className="name",r.innerText=t.value.title||"",n.appendChild(o),a.appendChild(r),n.appendChild(a),e.appendChild(n),t.value.invisible&&e.classList.add("invisible"),e.img=o,e.txt=r,e.ready=!0,e.movieObj=t.value)}function o(e){var t,i,s=this;switch(e.code){case v.left:case v.right:this.move(e.code);break;case v.down:case v.up:this.provider.get(e.code,function(e,n){if(e&&s.emit("data:error",e),n){for(s.data=s.translate(n),t=0;t<s.sizeY;t++)for(i=0;i<s.sizeX;i++)s.renderItem(s.map[t][i],s.data[t][i]);s.emit("data:ready")}s.provider.page>1?a.hide():a.show()}),s.$focusItem.data.disable&&s.focusItem(s.map[1][0]);break;case v.ok:void 0!==this.events["click:item"]&&this.emit("click:item",{$item:this.$focusItem,event:e})}}var a,r,c,l,d,h="pageVideoList",p=document.getElementById(h),u=i(9),m=new u({$node:p}),f=i(3),v=i(1),y=i(5),g=i(32),w=i(11),b=i(16),E=i(24),S=i(8),T=i(17),I=i(4),k=i(10),x=i(6).global,O=i(26),L=i(6),_=i(13),D=i(23),C=new S({value:"Sort",$node:document.getElementById("pageVideoListButtonSort"),visible:!1,events:{click:function(){m.emit("keydown",{code:v.f1})}}}),$=new T({visible:!1,events:{show:function(){$.list.focus(),$.list.focusIndex(0)},hide:function(){l.focus()}}}),B=document.getElementById("pageVideoListBreadCrumb"),P=[];m.addListener("load",function(){a=new w({$node:document.getElementById("pageVideoListHeader")}),a.add(C),r=new w({$node:document.getElementById("pageVideoListContentWrapper")}),m.add(r),r.add(a),m.add($)}),m.initVideoList=function(e,t,i){var h=[];P.length>0&&(P.forEach(function(e){e.remove()}),P=[]),t.item.sortTypes?(C.show(),$.active=!0,h=t.item.sortTypes.map(function(e){return{value:e}}),$.list&&($.list.remove(),$.list=null),$.list=new E({data:h,size:h.length>5?5:h.length,render:function(e,t){var i=document.createElement("div");e.innerHTML="",i.className="text",i.innerText=t.value.name,e.appendChild(i),e.data.sortObject=t.value},events:{keydown:function(e){E.prototype.defaultEvents.keydown.call(this,e),(e.code===v.exit||e.code===v.back)&&($.hide(),e.stop=!0)},"click:item":function(e){t.sortType=e.$item.data.value,d=new O({item:t,size:y.data.metrics.movieCount,plugin:k}),l.init({provider:d,sizeX:y.data.metrics.movieCount,sizeY:3}),l.once("data:ready",function(){$.hide(),l.focus(),l.focusItem(c.map[1][0])})}}}),$.add($.list)):($.active=!1,C.hide()),window.breadcrumb=[],e===I.dataProviderType.TYPE_SERVICE?breadcrumb[breadcrumb.length-1]!==t.item.title&&window.breadcrumb.push(t.item.title):e===I.dataProviderType.TYPE_SEARCH&&breadcrumb[breadcrumb.length-1]!==t.searchText&&window.breadcrumb.push(t.searchText),a.show(),B.innerText=window.breadcrumb.join(" | "),d=new O({item:t,size:y.data.metrics.movieCount,plugin:k}),d.addListener("preload",function(e){e.array.forEach(function(e){e.value&&e.value.img&&g.add([e.value.img])})}),c=new b({provider:d,focusable:!0,cycleY:!1,sizeX:y.data.metrics.movieCount,sizeY:3,render:n,events:{keydown:o,"data:ready":function p(){setTimeout(function(){c.focusItem(c.map[1][0]),c.removeListener("data:ready",p),i(),c.focus()},4)},mousewheel:function(e){e.deltaY>0?this.emit("keydown",{code:v.down}):this.emit("keydown",{code:v.up})},"click:item":s}}),t.item.system.type===L.system.CELEBRITY_LIST&&c.$node.classList.add("celebrities"),r.add(c),l=c,P[0]=c},
m.addListener("hide",function(){a.hide()}),m.addListener("keydown",function(e){var t;switch(e.code){case v.back:P.length>1?(breadcrumb.pop(),B.innerText=window.breadcrumb.join(" | "),t=P.pop(),t.remove(),l=P[P.length-1],l.show(),l.focus(),l.provider.page>1&&a.hide()):l.provider.type===I.dataProviderType.TYPE_SEARCH?_.initSearch(function(){f.navigate("pageSearch")}):l.provider.type===I.dataProviderType.TYPE_SERVICE&&f.navigate("pageService");break;case v.f1:$.active&&$.show()}}),e.exports=m},function(e,t,i){"use strict";var s={},n={method:"GET",async:!0,headers:{},type:"text",data:null,timeout:3e4,onload:null,onerror:null,ontimeout:null},o=Object.keys(n);s.ajax=function(e,t){var i,s,a;if(t=t||{},e&&("string"==typeof e||e instanceof String)&&e.length>0){if(t&&"object"==typeof t)for(i=0;i<o.length;i++)void 0===t[o[i]]&&(t[o[i]]=n[o[i]]);if(a=new XMLHttpRequest,a.open(t.method,e,t.async),t.headers&&"object"==typeof t.headers)for(s=Object.keys(t.headers),i=0;i<s.length;i++)a.setRequestHeader(s[i],t.headers[s[i]]);return a.responseType=t.type,a.timeout=t.timeout,t.onload&&"function"==typeof t.onload&&(a.onload=function(){t.onload.call(this,this.response||this.responseText,this.status)}),a.onerror=t.onerror,a.ontimeout=t.ontimeout,a.send(t.data?JSON.stringify(t.data):null),a}return!1},s.encode=function(e){var t,i,s=[];if(e&&"object"==typeof e){for(i=Object.keys(e),t=0;t<i.length;t++)s.push(encodeURIComponent(i[t])+"="+encodeURIComponent(e[i[t]]));if(s.length>0)return s.join("&")}return null},e.exports=s},function(e,t,i){"use strict";function s(e){e=e||{},this.map=[],this.$focusItem=null,this.data=[],this.cycleX=!0,this.cycleY=!0,this.focusX=0,this.focusY=0,e.className="grid "+(e.className||""),r.call(this,e),this.init(e)}function n(e){var t,i,s;for(t=0;t<e.length;t++)for(i=0;i<e[t].length;i++)s=e[t][i],"object"!=typeof s?s=e[t][i]={value:e[t][i],colSpan:1,rowSpan:1}:(s.colSpan=s.colSpan||1,s.rowSpan=s.rowSpan||1);return e}function o(e,t,i,s,n,o){var a,r;for(a=i;i+n>a;a++){for(e.length<a+1&&e.push([]);void 0!==e[a][t];)t++;for(r=t;t+s>r;r++)e[a].length<r+1&&e[a].push(),e[a][r]=o,void 0===o.x&&(o.x=r),void 0===o.y&&(o.y=a)}}function a(e){var t,i,s,n=[];for(t=0;t<e.length;t++)for(i=0;i<e[t].length;i++)s=e[t][i],o(n,i,t,s.colSpan,s.rowSpan,s.$item),delete s.$item;return n}var r=i(2),c=i(1);s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.renderItemDefault=function(e,t){e.innerText=t.value},s.prototype.renderItem=s.prototype.renderItemDefault,s.prototype.defaultEvents={mousewheel:function(e){e.wheelDeltaY&&this.move(e.wheelDeltaY>0?c.up:c.down),e.wheelDeltaX&&this.move(e.wheelDeltaX>0?c.left:c.right)},keydown:function(e){switch(e.code){case c.up:case c.down:case c.right:case c.left:this.move(e.code);break;case c.ok:this.events["click:item"]&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},s.prototype.init=function(e){var t,i,s,o,r,c,l,d,h=this,p=!1,u=function(e){this.data.disable!==!0&&(h.focusItem(this),h.events["click:item"]&&h.emit("click:item",{$item:this,event:e}))},m=function(d){if(d&&h.data!==d&&(h.data=d,p=!0),e.render&&h.renderItem!==e.render&&(h.renderItem=e.render,p=!0),p){for(h.$table=document.createElement("table"),r=document.createElement("tbody"),h.data=n(h.data),t=0;t<h.data.length;t++){for(s=r.insertRow(),i=0;i<h.data[t].length;i++)o=s.insertCell(-1),o.className="item",l=h.data[t][i],l.$item=o,o.colSpan=l.colSpan,o.rowSpan=l.rowSpan,l.focus&&(c=o),l.disable&&o.classList.add("disable"),l.mark&&o.classList.add("mark"),h.renderItem(o,l),o.data=l,o.addEventListener("click",u);r.appendChild(s)}h.map=a(h.data),h.$body.innerText=null,h.$table.appendChild(r),h.$body.appendChild(h.$table),c?h.focusItem(c):h.focusItem(h.map[0][0])}};void 0!==e.cycleX&&(this.cycleX=e.cycleX),void 0!==e.cycleY&&(this.cycleY=e.cycleY),e.provider&&(this.provider=e.provider,this.sizeX=e.sizeX,this.sizeY=e.sizeY),e.translate&&(this.translate=e.translate),e.provider?(d=this.provider.get(null,function(e,t){e&&h.events["data:error"]&&h.emit("data:error",e),m(h.translate(t)),h.events["data:ready"]&&h.emit("data:ready")}),this.events["data:get"]&&this.emit("data:get",{fresh:d})):m(e.data)},s.prototype.defaultTranslate=function(e){var t,i,s,n=[];for(t=0;t<this.sizeY;t++){for(s=[],i=0;i<this.sizeX;i++)s[i]=e[t*this.sizeX+i];n[t]=s}return n},s.prototype.translate=s.prototype.defaultTranslate,s.prototype.move=function(e){for(var t,i,s,n=this.focusX,o=this.focusY,a=!0,r=!1,l=!1;a;){switch(e){case c.up:o>0?o--:(this.cycleY&&(o=this.map.length-1,l=!0),r=!0);break;case c.down:o<this.map.length-1?o++:(this.cycleY&&(o=0,l=!0),r=!0);break;case c.right:n<this.map[o].length-1?n++:(this.cycleX&&(n=0,l=!0),r=!0);break;case c.left:n>0?n--:(this.cycleX&&(n=this.map[o].length-1,l=!0),r=!0)}n===this.focusX&&o===this.focusY&&(a=!1),this.map[o][n]!==this.map[this.focusY][this.focusX]&&this.map[o][n].data.disable!==!0&&(a=!1),r&&(a=!1,this.map[o][n].data.disable===!0&&(n=this.focusX,o=this.focusY))}this.focusItem(this.map[o][n]),this.focusX=n,this.focusY=o,r&&(this.provider&&(t=this.provider.get(e,function(e,t){if(e)return self.events["data:error"]&&self.emit("data:error",e),!1;if(t){for(self.data=self.translate(t),i=0;i<self.sizeY-1;i++)for(s=0;s<self.sizeX;s++)self.renderItem(self.map[i][s],self.data[i][s]);self.events["data:ready"]&&self.emit("data:ready")}}),this.events["data:get"]&&this.emit("data:get",{fresh:t})),this.events.overflow&&this.emit("overflow",{direction:e,cycle:l}))},s.prototype.focusItem=function(e){var t=this.$focusItem;return e&&t!==e&&e.data.disable!==!0?(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.focusX=e.x,this.focusY=e.y,this.$focusItem=e,e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),!0):!1},s.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=s},function(e,t,i){"use strict";function s(e){e=e||{},n.call(this,e),this.$node===this.$body&&(this.$body=document.createElement("div"),this.$body.className="body",this.$wrapper=document.createElement("div"),this.$wrapper.className="wrapper",this.$wrapper.appendChild(this.$body),this.$node.appendChild(document.createElement("div").appendChild(this.$wrapper).parentNode)),this.$node.classList.add("modalBox"),this.$node.classList.add("multiplexModalBox")}var n=i(2);s.prototype=Object.create(n.prototype),s.prototype.constructor=s,e.exports=s},function(e,t,i){"use strict";function s(e){e=e||{},e.focusable=e.focusable||!1,e.visible=e.visible||!1,e.className="widget "+(e.className||""),n.call(this,e)}var n=i(2);s.prototype=Object.create(n.prototype),s.prototype.constructor=s,e.exports=s},function(e,t,i){"use strict";var s="inputWidgetWrapper",n=document.getElementById(s),o=i(18),a=new o({$node:n,visible:!1,focusable:!0}),r=i(1),c=i(34),l=new c({$node:document.getElementById("inputWidget")});a.add(l),a.$node.classList.remove("invisible"),a.addChar=function(e){l.addChar(e)},a.removeChar=function(){l.removeChar()},a.getValue=function(){return l.value},a.setValue=function(e){l.setValue(e),setTimeout(function(){l.setValue(e)},0)},a.delChar=function(){l.removeChar(l.value.length-1)},a.input=l,l.addListener("keydown",function(e){var t;e.code===r.ok&&l.value.length>0?(t=i(20),t.button.focus()):e.code===r.back&&(e.stop=!0)}),a.overflowBot=function(e){l.addListener("keydown",function(t){t.code===r.down&&e()})},e.exports=a},function(e,t,i){"use strict";var s,n="keyboardWidgetWrapper",o=document.getElementById(n),a=i(18),r=new a({$node:o,visible:!1,focusable:!0}),c=i(1),l=i(5),d=i(3),h=i(16),p=i(8),u=i(4),m=i(36),f=i(19),v=i(21),y=new h({$node:document.getElementById("keyboardWidget"),data:m.en,cycleY:!1,cycleX:!1,render:function(e,t){var i,s=document.createElement("div");s.classList.add("keyboardButton"),t.id&&(e.id=t.id),s.innerText=t.value,e.appendChild(s),t.img&&(i=document.createElement("img"),i.src="./img/"+l.data.metrics.height+"/"+t.img+".png",s.appendChild(i))}}),g=new p({$node:document.getElementById("keyboardWidgetSearchBtn"),value:"Search"});r.$node.classList.remove("invisible"),r.add(y),r.add(g),r.isUpper=!1,r.lang="en",y.addListener("click:item",function(e){if(f.visible)if(e.$item.data.id)switch(e.$item.data.id){case"keyUp":r.upper();break;case"keyBackspace":f.delChar();break;case"keySpace":f.addChar(" ");break;case"keyLeft":f.input.emit("keydown",{code:c.left});break;case"keyRight":f.input.emit("keydown",{code:c.right});break;case"keyLang":r.changeLang()}else r.isUpper?f.addChar(e.$item.data.value.toString().toUpperCase()):f.addChar(e.$item.data.value.toString())}),y.addListener("keydown",function(e){switch(e.code){case 112:e.stop=!0,f.delChar();break;case 115:g.emit("click",{});break;case 114:break;case 113:f.addChar(" ")}}),g.addListener("keydown",function(e){switch(e.code){case c.left:y.focus()}}),g.addListener("click",function(){s=i(14),f.visible&&f.getValue().length>0&&s.initVideoList(u.dataProviderType.TYPE_SEARCH,{item:r.searchObj,searchText:f.getValue()},function(){r.hide(),f.hide(),g.blur(),d.navigate("pageVideoList"),v.add(f.getValue())})}),r.upper=function(){this.isUpper?this.$node.classList.remove("upperCase"):this.$node.classList.add("upperCase"),this.isUpper=!this.isUpper},r.overflowTop=function(e){var t=d.current.id;y.events.overflow=[],y.addListener("overflow",function(i){switch(i.direction){case c.up:d.current.id===t&&e();break;case c.right:g.focus()}})},r.changeLang=function(){"ru"===r.lang?(y.init({data:m.en}),r.lang="en"):(y.init({data:m.ru}),r.lang="ru"),y.focusItem(y.map[2][5])},r.showBg=function(e){e?r.$node.classList.add("background"):r.$node.classList.remove("background")},r.button=g,r.keys=y,e.exports=r},function(e,t,i){"use strict";var s={},n=[],o=(i(4),i(12)),a=i(15);s.getData=function(e){var t,i,s=[];n=[],o.isAuthorize?a.ajax("http://api.freemultiplex.com/v1/history/search",{method:"GET",headers:{Authorization:o.token},timeout:6e3,onload:function(o){var a,r=JSON.parse(o).data;if(r.forEach(function(e){n.push(e.info)}),n.length>0){for(n.length%2!==0&&n.push({value:"",disable:!0}),i=n.length/2,s[0]=[],s[0].push(n[0]),s[0].push(n[i]),t=1;i>t;t++)s[t]=[],s[t].push(n[t]),a=t+parseFloat(i),s[t].push(n[a]);e(s)}else e(null)}}):e(null)},s.clearStorage=function(e){n=[],a.ajax("http://api.freemultiplex.com/v1/history/search",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:o.token},timeout:6e3,onload:function(t){var i=JSON.parse(t);e(200===i.code?!0:!1)},onerror:function(){e(!1)}})},s.removeLast=function(){n.pop()},s.add=function(e){n.length&&e===n[0].value||(n.pop(),n.unshift({value:e}),e&&a.ajax("http://api.freemultiplex.com/v1/history/search",{method:"POST",headers:{"Content-Type":"application/json",Authorization:o.token},data:{value:e},timeout:6e3,onload:function(){}}))},e.exports=s},function(e,t,i){"use strict";function s(){d.isMuted&&(gSTB.SetMute(0),d.isMuted=!1,f.classList.remove("muted")),m>=g&&(m-=g,f.innerText=m.toString(),0!==m&&m-g>0?v.innerText=(m-g).toString():v.innerText="",y.innerText=(m+g).toString(),gSTB.SetVolume(m))}function n(){d.isMuted&&(gSTB.SetMute(0),d.isMuted=!1,f.classList.remove("muted")),100>=m+g&&(m+=g,f.innerText=m.toString(),100!==m?y.innerText=(m+g).toString():y.innerText="",gSTB.SetVolume(m),v.innerText=(m-g).toString())}function o(){d.isMuted?(gSTB.SetMute(0),d.isMuted=!1,f.classList.remove("muted")):(gSTB.SetMute(1),d.isMuted=!0,f.classList.add("muted"))}var a,r="volumeWidget",c=document.getElementById(r),l=i(18),d=new l({$node:c,visible:!1,focusable:!0}),h=i(1),p=i(4),u=i(12),m=p.volume,f=document.getElementById("volumeCurrentValue"),v=document.getElementById("volumeBotValue"),y=document.getElementById("volumeTopValue"),g=10;gSTB.SetVolume(m),f.innerText=m.toString(),100-g>=m&&(y.innerText=(m+g).toString()),m>=g?v.innerText=(m-g).toString():v.innerText="0",d.isMuted=Boolean(gSTB.GetMute()),d.$node.classList.remove("invisible"),d.changeVolume=function(e){switch(e){case h.volumeDown:s();break;case h.volumeUp:n();break;case h.mute:o()}this.display(2),p.volume=m,u.profile.save()},d.display=function(e){d.visible&&clearTimeout(a),void 0!==e&&(a=setTimeout(function(){d.hide()},1e3*e)),this.show()},d.setValue=function(e){0>e||e>100||(m=e,f.innerText=m.toString(),0!==m&&m-g>0?v.innerText=(m-g).toString():v.innerText="",100!==m?y.innerText=(m+g).toString():y.innerText="")},e.exports=d},function(e,t,i){"use strict";function s(e){var t=new XMLHttpRequest,i="vote="+(e?"5":"0");return E?!1:(t.open("POST",a),t.setRequestHeader("Accept","*/*"),t.setRequestHeader("Content-Type","Type:application/x-www-form-urlencoded; charset=UTF-8"),t.send(i),g.funny.hide(),g.die.hide(),E=!0,O.style.width=(e?100:0)+"%",L.innerText=e?"FUNNY":"DIE",L.classList.add("visible"),void(e||L.classList.add("red")))}var n,o,a,r="pagePlayer",c=document.getElementById(r),l=i(9),d=new l({$node:c}),h=i(3),p=i(1),u=(i(5),i(15),i(25)),m=i(31),f=i(35),v=i(8),y=i(10),g={},w=new f({$node:document.getElementById("playerProgress")}),b={current:0,list:[],currentMedia:{}},E=!1,S=document.getElementById("playerTitle"),T=document.getElementById("playerTotalTime"),I=document.getElementById("playerCurrentTime"),k=document.getElementById("playerViews"),x=document.getElementById("playerDate"),O=document.getElementById("playerLikeValue"),L=document.getElementById("playerLikeText"),_=document.getElementById("playerPlay");d.play=function(e){n.show(),n.attach=!1,o.keyBlock=!0,e=e||{},w.set(0),S.innerText=e.content.title,T.innerText="00:00",I.innerText="00:00",_.className="icon-pause2",a="http://www.funnyordie.com/player/"+e.content.url.split("/")[4]+"/vote",L.className="",y.getCursor({item:e.content},function(t,i){y.getNext(i,function(t,i){return t?void h.back():(i.likes=parseInt(i.likes.split(" ")[0].replace(/,/g,""),10),i.dislikes=parseInt(i.dislikes.split(" ")[0].replace(/,/g,""),10),i.views=parseInt(i.views.split(" ")[0].replace(/,/g,""),10),O.style.width=e.content.likeBar+"%",i.views>=1e6?i.views=parseInt(i.views/1e6,10)+"m views":i.views<1e6&&i.views>=1e3?i.views=parseInt(i.views/1e3,10)+"k views":i.views=i.views+" views",i.date=i.date.slice(10),x.innerText=i.date||"",k.innerText=i.views||"",void(i.url&&o.play(i.url)))})}),g.funny.show(),g.die.show(),E=!1,h.navigate("pagePlayer"),n.show(),n.attach=!1},d.addListener("load",function(){function e(e){o.rewindHelper.isActive||o.setModeHelper.active||(w.set(e.sec),I.innerText=e.time)}o=new m({$node:document.getElementById("fodPlayer"),rewindTimeout:600,events:{keydown:function(e){if(!o.keyBlock){switch(e.code){case p.info:return void n.display();case p.ok:case p.playPause:this.playPause();break;case p.stop:this.stop();break;case p.forward:case p.right:this.rewind(!0);break;case p.rewind:case p.left:this.rewind(!1);break;case p.f4:case 117:this.nextAspect();break;case p.back:return}n.display(5)}}}}),n=new u({$node:document.getElementById("playerPanel"),visible:!1,children:[new v({value:"",$node:document.getElementById("playerPlay"),focusable:!1,events:{click:function(){o.playPause()}}}),new v({value:"",$node:document.getElementById("playerPrev"),focusable:!1,events:{click:function(){this.rewind(!1)}}}),new v({value:"",$node:document.getElementById("playerNext"),focusable:!1,events:{click:function(){this.rewind(!0)}}}),g.funny=new v({value:"",$node:document.getElementById("playerFunny"),focusable:!1,events:{click:function(){s(!0)}}}),g.die=new v({value:"",$node:document.getElementById("playerDie"),focusable:!1,events:{click:function(){s(!1)}}})],events:{show:function(){o.addListener("duration",e)},hide:function(){o.removeListener("duration",e)}}}),d.add(o),o.add(n),o.addListeners({"get:info":function(e){o.stream||(T.innerText=e.totalDuration,w.init({value:0,max:e.totalDurationSec})),o.keyBlock=!1,n.display(5)},rewind:function(e){var t=o.parseTime(e.time),i="";w.set(e.time),+t.hour&&(i+=t.hour+":"),i+=t.min+":"+t.sec,I.innerText=i},"content:end":function(){b.current<b.list.length-1?(b.current++,o.play(b.list[b.current].url)):h.back()},"content:error":function(){b.current<b.list.length-1?(b.current++,o.play(b.list[b.current].url)):h.back()},pause:function(e){e.state?_.className="icon-play3":_.className="icon-pause2"}})}),d.addListener("show",function(){o.focus()}),d.addListener("keydown",function(e){switch(e.code){case p.back:o.stop(),h.navigate("pageVideoList");break;case p.stop:o.stop(),h.navigate("pageVideoList");break;case p.exit:o.stop(),window.parent!==window&&(e.stop=!0,h.navigate("pageVideoList"),window.parent.postMessage("hide","*"));break;case p.f1:s(!1);break;case p.f3:s(!0)}}),d.addListener("hide",function(){n.hide(),n.displayTimeout&&(clearTimeout(n.displayTimeout),n.displayTimeout=!1)}),e.exports=d},function(e,t,i){"use strict";function s(e){e=e||{},this.$focusItem=null,this.viewIndex=null,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,e.type&&(this.type=e.type),e.className="list "+(e.className||""),this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),o.call(this,e),this.init(e)}function n(e){var t,i;for(t=0;t<e.length;t++)i=e[t],"object"!=typeof i&&(i=e[t]={value:e[t]});return e}var o=i(2),a=i(1);s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.TYPE_VERTICAL=1,s.prototype.TYPE_HORIZONTAL=2,s.prototype.renderItemDefault=function(e,t){e.innerText=t.value},s.prototype.renderItem=s.prototype.renderItemDefault,s.prototype.defaultEvents={mousewheel:function(e){this.type===this.TYPE_VERTICAL&&e.wheelDeltaY&&this.move(e.wheelDeltaY>0?a.up:a.down),this.type===this.TYPE_HORIZONTAL&&e.wheelDeltaX&&this.move(e.wheelDeltaX>0?a.left:a.right)},keydown:function(e){switch(e.code){case a.up:case a.down:case a.right:case a.left:case a.pageUp:case a.pageDown:case a.home:case a.end:this.move(e.code);break;case a.ok:this.events["click:item"]&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},s.prototype.init=function(e){var t,i,s=this,o=this.$body.children.length,a=function(e){this.data&&(s.focusItem(this),s.events["click:item"]&&s.emit("click:item",{$item:this,event:e}))};if(void 0!==e.cycle&&(this.cycle=e.cycle),e.scroll&&(this.scroll=e.scroll),e.data&&(this.data=n(e.data)),e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),this.size!==o)for(o>0&&(this.$body.innerText=null),i=0;i<this.size;i++)t=document.createElement("div"),t.index=i,t.className="item",t.addEventListener("click",a),this.$body.appendChild(t);void 0!==e.viewIndex,this.viewIndex=null,void 0!==e.focusIndex?this.focusIndex(e.focusIndex):this.renderView(e.viewIndex||0)},s.prototype.renderView=function(e){var t,i,s,n,o;if(this.viewIndex!==e){for(n=this.viewIndex,this.viewIndex=o=e,i=0;i<this.size;i++)t=this.$body.children[i],s=this.data[e],s?(t.data=s,t.index=e,this.renderItem(t,s),s.mark?t.classList.add("mark"):t.classList.remove("mark")):(t.data=t.index=void 0,t.innerHTML="&nbsp;"),e++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:n,currIndex:o}),this.events["select:item"]&&this.emit("select:item",{$item:t}),this.scroll&&this.scroll.scrollTo(this.viewIndex),!0}return!1},s.prototype.move=function(e){(e===a.up&&this.type===this.TYPE_VERTICAL||e===a.left&&this.type===this.TYPE_HORIZONTAL)&&(this.$focusItem&&this.$focusItem.index>0?this.$focusItem===this.$body.firstChild?this.renderView(this.viewIndex-1):this.focusItem(this.$focusItem.previousSibling):this.cycle?(this.move(a.end),this.events.cycle&&this.emit("cycle",{direction:e})):this.events.overflow&&this.emit("overflow",{direction:e})),(e===a.down&&this.type===this.TYPE_VERTICAL||e===a.right&&this.type===this.TYPE_HORIZONTAL)&&(this.$focusItem&&this.$focusItem.index<this.data.length-1?this.$focusItem===this.$body.lastChild?this.renderView(this.viewIndex+1):this.focusItem(this.$focusItem.nextSibling):this.cycle?(this.move(a.home),this.events.cycle&&this.emit("cycle",{direction:e})):this.events.overflow&&this.emit("overflow",{direction:e})),e===a.pageUp&&(this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild)),e===a.pageDown&&(this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])),e===a.home&&(this.renderView(0),this.focusItem(this.$body.firstChild)),e===a.end&&(this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]))},s.prototype.focusItem=function(e){var t=this.$focusItem;return e&&t!==e?(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.$focusItem=e,this.$focusItem.data=this.data[this.$focusItem.index],e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),this.events["select:item"]&&this.emit("select:item",{$item:e}),!0):!1},s.prototype.focusIndex=function(e){var t=this.viewIndex||0;e>=t+this.size?(e=e<this.data.length-1?e:this.data.length-1,this.renderView(e-this.size+1),this.focusItem(this.$body.lastChild)):t>e?(e=e>0?e:0,this.renderView(e),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[e-t]))},s.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=s},function(e,t,i){"use strict";function s(e){e=e||{},n.call(this,e),this.displayTimeout=0,this.attach=!1,this.$node.classList.add("playerPanel")}var n=i(11);s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.display=function(e){var t=this;if(e){if(this.attach)return;e=1e3*e,this.show(),this.displayTimeout&&(clearTimeout(this.displayTimeout),this.displayTimeout=0),this.displayTimeout=setTimeout(function(){t.hide(),t.displayTimeout=0},e)}else this.displayTimeout?(clearTimeout(this.displayTimeout),this.displayTimeout=0,this.hide()):(this.attach?this.hide():this.show(),this.attach=!this.attach)},e.exports=s},function(e,t,i){"use strict";function s(e){e=e||{},n.call(this),this.initItem=e.item,this.responseSize=e.size,this.nextCacheSize=e.cacheSize/2||40,this.prevCacheSize=e.cacheSize/2||40,this.cache={data:[],head:0,tail:0},this.plugin=e.plugin,e.item.searchText?(this.type=a.dataProviderType.TYPE_SEARCH,this.searchText=e.searchText):this.type=a.dataProviderType.TYPE_SERVICE}var n=i(7),o=i(1),a=i(4);s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.get=function(e,t){var i,s=this,n=!0,a=!1,r=[],c=[];switch(e){case null:for(this.page=1,this.cache.tail=0,this.cache.head=0,this.cache.data=[],this.cache.emptyBotCount=0,this.cache.botEmptyLine=!1,this.cache.topEmptyLine=!0,i=0;i<this.responseSize;i++)this.cache.data.push({value:{date:"",img:"",title:"",url:"",invisible:!0},disable:!0});this.plugin.getCursor(this.initItem,function(e,i){s.cache.headCursor=i,s.plugin.getCursor(s.initItem,function(e,t){s.cache.tailCursor=t}),s.plugin.getNext(s.cache.headCursor,function(e,i){var n,o=!1;e||(i.forEach(function(e){s.cache.data.push({value:e})}),s.cache.data.length>=3*s.responseSize?(n=s.cache.data.slice(0,3*s.responseSize),s.cache.head=3*s.responseSize,t(o,n),s.events.preload&&s.emit("preload",{array:s.cache.data.slice(3*s.responseSize,5*s.responseSize)}),s.cache.currentData=n,s.checkNext()):s.checkNext(function(){n=s.cache.data.slice(0,3*s.responseSize),s.cache.head=3*s.responseSize,t(o,n),s.cache.currentData=n,s.events.preload&&s.emit("preload",{array:s.cache.data.slice(3*s.responseSize,5*s.responseSize)})}))})});break;case o.down:if(this.cache.head+this.responseSize<=this.cache.data.length)r=this.cache.data.slice(this.cache.head,this.cache.head+this.responseSize),this.cache.head+=this.responseSize,this.cache.tail+=this.responseSize,this.cache.head+3*this.responseSize<=this.cache.data.length&&(c=this.cache.data.slice(this.cache.head+2*this.responseSize,this.cache.head+3*this.responseSize)),this.page++,this.checkNext();else if(1===this.page&&this.cache.data.length%this.responseSize!==0){for(i=0;i<this.cache.data.length%this.responseSize+this.responseSize;i++)this.cache.data.push({value:{date:"",img:"",title:"",url:"",invisible:!0},disable:!0}),this.cache.emptyBotCount++;this.cache.botEmptyLine=!0,r=this.cache.data.slice(this.cache.head,this.cache.head+this.responseSize),this.cache.head+=this.responseSize,this.cache.tail+=this.responseSize,this.page++,this.checkNext()}else r=[],a=!0;r.length>0&&(this.cache.currentData=this.cache.currentData.slice(this.responseSize).concat(r)),t(a,this.cache.currentData),this.events.preload&&this.emit("preload",{array:c});break;case o.up:if(1===this.page)return!1;this.cache.tail-this.responseSize>=0?(r=this.cache.data.slice(this.cache.tail-this.responseSize,this.cache.tail),this.cache.head-=this.responseSize,this.cache.tail-=this.responseSize,this.cache.tail-2*this.responseSize>=0&&(c=this.cache.data.slice(this.cache.tail-2*this.responseSize,this.cache.tail-this.responseSize)),this.page--,this.checkPrev()):(r=null,a=!0),r.length>0&&(this.cache.currentData.splice(-this.responseSize),this.cache.currentData=r.concat(this.cache.currentData)),t(a,this.cache.currentData)}return n},s.prototype.checkNext=function(e){var t,i=this;this.cache.botEmptyLine||(this.cache.data.length<this.cache.head+this.nextCacheSize&&this.plugin.getNext(this.cache.headCursor,function(s,n){if(s);else if(n.length>0)n.forEach(function(e){i.cache.data.push({value:e})}),i.cache.data.length>=3*i.responseSize&&e?e():i.checkNext(e);else{for(t=0;t<i.cache.data.length%i.responseSize;t++)i.cache.data.push({value:{date:"",img:"",title:"",url:"",invisible:!0},disable:!0}),i.cache.emptyBotCount++;for(t=0;t<i.responseSize;t++)i.cache.data.push({value:{date:"",img:"",title:"",url:"",invisible:!0},disable:!0});i.cache.emptyBotCount+=i.responseSize,i.cache.botEmptyLine=!0,e&&e()}}),this.cache.tail>=this.prevCacheSize+3*this.responseSize&&this.plugin.getNext(this.cache.tailCursor,function(e,t){var s,n;if(e);else{for(n=t.length,i.cache.topEmptyLine&&(n+=i.responseSize,i.cache.topEmptyLine=!1),s=0;n>s;s++)i.cache.data.shift();i.cache.head-=n,i.cache.tail-=n}}))},s.prototype.checkPrev=function(){var e,t=this;this.topEmptyLine||(this.cache.tail<this.prevCacheSize-3*this.responseSize&&this.plugin.getPrev(this.cache.tailCursor,function(i,s){if(i);else if(s.length>0){for(e=s.length-1;e>=0;e--)t.cache.data.unshift({value:s[e]});t.cache.head+=s.length,t.cache.tail+=s.length}else if(!t.cache.topEmptyLine){for(e=0;e<t.responseSize;e++)t.cache.data.unshift({value:{date:"",img:"",title:"",url:"",invisible:!0},disable:!0});t.cache.head+=t.responseSize,t.cache.tail+=t.responseSize,t.cache.topEmptyLine=!0}}),this.cache.data.length-this.cache.head>this.nextCacheSize&&this.plugin.getPrev(this.cache.headCursor,function(e,i){var s;s=i.length,t.cache.botEmptyLine&&(s+=t.cache.emptyBotCount,t.cache.botEmptyLine=!1),t.cache.data.splice(t.cache.data.length-s,s)}))},e.exports=s},function(e,t,i){"use strict";var s="pageInit",n=i(9),o=new n({$node:document.getElementById(s)}),a=i(3);o.route=function(){a.navigate("pageService")},e.exports=o},function(e,t,i){"use strict";function s(e){switch(e.$item.data.value.type){case L.CATEGORY:E.initVideoList(b.dataProviderType.TYPE_SERVICE,{item:e.$item.data.value},function(){m.navigate("pageVideoList")});break;case L.FOLDER:n(e.$item.data.value);break;case _.TYPE_BACK:o();break;case L.SEARCH:S.initSearch(function(){m.navigate("pageSearch")})}}function n(e){O.push(e),x.getCursor({item:e},function(e,t){x.getNext(t,function(e,t){var i=[];0!==t.length&&(i.push(D.back),t.forEach(function(e){i.push({value:e})}),c.viewIndex=-1,c.init({data:i,size:i.length}),c.$body.children[1]?c.focusItem(c.$body.children[1]):c.focusItem(c.$body.children[0]))})})}function o(){1===O.length||(2===O.length?u.initService(function(){c.focus()}):(O.pop(),x.getCursor({item:O[O.length-1]},function(e,t){var i=[];x.getNext(t,function(e,t){0!==O.length&&i.push(D.back),t.forEach(function(e){i.push({value:e})}),c.viewIndex=-1,c.init({data:i,size:i.length}),c.focusItem(c.$body.children[0])})})))}var a,r,c,l,d="pageService",h=document.getElementById(d),p=i(9),u=new p({$node:h}),m=i(3),f=i(1),v=i(11),y=i(24),g=i(17),w=i(8),b=(i(5),i(4)),E=i(14),S=i(13),T=new g({visible:!1,events:{show:function(){T.okBtn.focus()},hide:function(){l.focus()}}}),I=document.getElementById("pageServiceCatImg"),k=document.getElementById("pageServiceLogo"),x=i(10),O=[],L=i(6).global,_={TYPE_BACK:20,TYPE_SEARCH_LIST:12,TYPE_SEARCH:13},D={back:{value:{title:"Back",specialClass:"backItem",type:_.TYPE_BACK}},searchArr:[]},C=[];u.addListener("load",function(){a=new v({focusable:!1,$node:document.getElementById("pageServiceWrapper")}),u.add(a),r=new v({$node:document.getElementById("pageServiceRightPanel")}),a.add(r),u.initService(function(){}),u.add(T),T.add(T.title=new v),T.title.$body.innerText="Are you sure you want to exit?",T.add(T.okBtn=new w({value:"Exit",events:{keydown:function(e){switch(w.prototype.defaultEvents.keydown.call(this,e),e.code){case f.right:T.cancelBtn.focus();break;case f.back:case f.exit:T.hide(),e.stop=!0}},click:function(){var e,t,i,s=window.location.href,n={};if(s.indexOf("?")>=0){for(t=s.split("#")[0].split("?")[1].split("&"),e=0;e<t.length;e++)i=t[e].split("="),n[i[0]]=i[1];n.referrer?window.location=decodeURIComponent(n.referrer):window.location="file:///home/web/services.html"}else document.referrer&&document.referrer.length>4?s.split("#")[0]===document.referrer?window.location="file:///home/web/services.html":window.location=document.referrer:window.location="file:///home/web/services.html"}}})),T.add(T.cancelBtn=new w({value:"Cancel",events:{keydown:function(e){switch(w.prototype.defaultEvents.keydown.call(this,e),e.code){case f.left:T.okBtn.focus();break;case f.back:case f.exit:T.hide(),e.stop=!0}},click:function(){T.hide()}}}))}),u.addListener("show",function(){try{c.focus(),c.focusItem(c.$focusItem)}catch(e){}window.breadcrumb=[]}),u.initService=function(e,t){var i=document.getElementById("pageServiceDescription");k.classList.add("logo"),C=[],i.innerText="Funny or Die's free video app brings you fresh featured videos every day. Also find our most popular videos and search our archives, including The Landlord with Will Ferrell, Between Two Ferns, Drunk History, Acting with James Franco and much, much more.",O=[x.root],window.breadcrumb=[],x.getCursor({item:x.root},function(i,n){i&&t(),x.getNext(n,function(t,i){i.forEach(function(e){var t={};t.value=e,C.push(t)}),x.root.searchable&&C.unshift({value:{title:"Search",type:_.TYPE_SEARCH,img:"http://wimeo.h.od.ua/data/img/0.png"}}),c&&c.remove(),c=new y({data:C,size:C.length,render:function(e,t){var i=document.createElement("div"),s=document.createElement("div");e.innerHTML="",s.className="text",i.className="wrapper",s.innerText=t.value.title,t.value.specialClass?i.classList.add(t.value.specialClass):i.className="wrapper",t.value.searchType&&(e.data.value.searchType=t.value.searchType),i.appendChild(s),e.appendChild(i)}}),r.add(c),c.addListeners({"click:item":s,"focus:item":function(e){c.$node.style.top=u.$node.offsetHeight/2-c.$focusItem.index*c.$focusItem.offsetHeight-c.$focusItem.offsetHeight/2+"px",e.$curr.data.value.img&&(I.src="./img/icons/"+e.$curr.data.value.img)}}),c.$node.style.top=u.$node.offsetHeight/2-c.$node.firstChild.offsetHeight/2+"px",c.focus(),c.focusIndex(0),e()})})},u.addListener("keydown",function(e){switch(e.code){case f.back:o();break;case f.exit:e.stop=!0,window.parent===window?O.length>1?u.initService(null,function(){c.focus()}):(l=m.current.activeComponent,T.show()):window.parent.postMessage("hide","*")}}),e.exports=u},function(e,t,i){"use strict";var s=i(6);e.exports={main:[{title:"Search",type:s.global.SEARCH,img:"icon.search.png",system:{type:s.system},url:"http://www.funnyordie.com/browse/videos/all/all/most_viewed/all_time"},{title:"All videos",type:s.global.CATEGORY,img:"icon.movie.png",
system:{type:s.system.ALL_VIDEOS},url:"http://www.funnyordie.com/browse/videos/all/all/most_viewed/all_time",sortTypes:[{name:"Most Viewed",url:"http://www.funnyordie.com/browse/videos/all/all/most_viewed/all_time"},{name:"Most Buzz",url:"http://www.funnyordie.com/browse/videos/all/all/most_buzz/all_time"},{name:"Most Recent",url:"http://www.funnyordie.com/browse/videos/all/all/most_recent/all_time"},{name:"Highest Rated",url:"http://www.funnyordie.com/browse/videos/all/all/highest_rated/all_time"}]},{title:"By Celebrities",type:s.global.CATEGORY,img:"icon.celeb.png",system:{type:s.system.CELEBRITY_LIST},url:"url"},{title:"Hall of Fame",type:s.global.CATEGORY,img:"icon.funny.png",system:{type:s.system.VIDEO_LIST},url:"http://www.funnyordie.com/hof/playlists/345729"}],celebrities:[{title:"Zach Galifianakis ",url:"http://www.funnyordie.com/zachgalifianakis",img:"http://r.fod4.com/c=sq/s=w220,pd1/o=80/http://p.fod4.com/p/channels/ehhxe/profile/x30QcTOxQ2OWU44d7g0r_zach-galifianakis-cereal-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Will Ferrell",url:"http://www.funnyordie.com/will_ferrell",img:"http://r.fod4.com/c=sq/s=w220,pd1/o=80/http://p.fod4.com/p/channels/ujzdq/profile/2vnSYbMqSU68CBHEwAQp_will-ferrell-with-butterflies-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Scott Aukerman",url:"http://www.funnyordie.com/scott_aukerman",img:"http://r.fod4.com/c=sq/s=w220,pd1/o=80/http://p.fod4.com/p/channels/kwzcs/profile/fgb4wC6eQBujvCGc9JeK_scott-aukerman-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Justin Bieber  ",url:"http://www.funnyordie.com/justin_bieber",img:"http://r.fod4.com/c=sq/s=w220,pd1/o=80/http://p.fod4.com/p/channels/mivcu/profile/826WN4WlTLeejFx0VWqX_justing-bieber-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Adam McKay",url:"http://www.funnyordie.com/adam_mckay",img:"http://r.fod4.com/c=sq/s=w220,pd1/o=80/http://p.fod4.com/p/channels/djbnc/profile/pfgqAWhNSJKGGHFMdGb2_adam-mckay-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Adam Scott",url:"http://www.funnyordie.com/adam_scott",img:"http://r.fod4.com/c=sq/s=w220,pd1/o=80/http://p.fod4.com/p/channels/ordwi/profile/s=w1200/o=95/SPLgLfHHQIMrICIKrQy6_adam_scott.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Rachel Bilson",url:"http://www.funnyordie.com/rachel_bilson",img:"http://r.fod4.com/c=sq/s=w220,pd1/o=80/http://p.fod4.com/p/channels/piubl/profile/rYGlvSkrROyo3WOsG03s_rachel-bilson-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"McG ",url:"http://www.funnyordie.com/mcg",img:"http://r.fod4.com/c=sq/s=w220,pd1/o=80/http://p.fod4.com/p/channels/legacy/profile/1082489/mcg.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Eva Mendes",url:"http://www.funnyordie.com/eva_mendes",img:"http://r.fod4.com/c=sq/s=w220,pd1/o=80/http://p.fod4.com/p/channels/gnjry/profile/uUI5NMjUQCuf1nCfGOQr_eva-mendes-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"President Barack Obama",url:"http://www.funnyordie.com/president_barack_obama",img:"http://r.fod4.com/c=sq/s=w220,pd1/o=80/http://p.fod4.com/p/channels/fzoud/profile/JFRGCIGYSZiC8vugtlHt_obama.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Judd Apatow  ",url:"http://www.funnyordie.com/judd_apatow",img:"http://r.fod4.com/c=sq/s=w220,pd1/o=80/http://p.fod4.com/p/channels/izsmc/profile/jhDY426KSX6aFUISEAtK_judd-apatow-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"John C Reilly",url:"http://www.funnyordie.com/john_c_reilly",img:"http://r.fod4.com/c=sq/s=w220,pd1/o=80/http://p.fod4.com/p/channels/legacy/profile/34993/reilly.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Drunk History",url:"http://www.funnyordie.com/drunkhistory",img:"http://r.fod4.com/c=sq/s=w220,pd1/o=80/http://p.fod4.com/p/channels/uwkfh/profile/s=w1200/o=95/VY5Aw0LyTTqnzYCt4rkE_drunkhistory-1024x1024_v1.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Charlize Theron",url:"http://www.funnyordie.com/charlize_theron",img:"http://r.fod4.com/c=sq/s=w220,pd1/o=80/http://p.fod4.com/p/channels/qpztk/profile/ToJNnsiRhmm405cz7CPX_charlize-theron-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Derekwaters",url:"http://www.funnyordie.com/derekwaters",img:"http://r.fod4.com/c=sq/s=w220,pd1/o=80/http://p.fod4.com/p/channels/legacy/profile/91363/me2.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Jon Hamm",url:"http://www.funnyordie.com/jon_hamm",img:"http://r.fod4.com/c=sq/s=w220,pd1/o=80/http://p.fod4.com/p/channels/legacy/profile/1035948/jonhamm.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Dave Franco",url:"http://www.funnyordie.com/davefranco",img:"http://r.fod4.com/c=sq/s=w220,pd1/o=80/http://p.fod4.com/p/channels/kdvby/profile/7OJskKTfRfS2luZMAHcl_dave-franco-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Chris Henchy",url:"http://www.funnyordie.com/chris_henchy",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/knisp/profile/5l3BckASTDyOn3Z0v2X3_chris-henchy-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Ben Stiller",url:"http://www.funnyordie.com/benstiller",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/aoxpj/profile/s=w1200/o=95/wA4o9RdTQX2IMMN2rIFu_benstiller.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Don Cheadle",url:"http://www.funnyordie.com/don_cheadle",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/ugdxk/profile/u9IGPM2tTqaav4rnfW2F_don-cheadle-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Emma Stone",url:"http://www.funnyordie.com/emma_stone",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/wsoiz/profile/s=w1200/o=95/o6iF4ufbQUO5fEpHcxef_emma_stone.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Eva Longoria",url:"http://www.funnyordie.com/eva_longoria",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/hrxkn/profile/s=w1200/o=95/vZFPd8r4QMa2CZwPckxz_eva_longoria.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Alyssa Milano",url:"http://www.funnyordie.com/alyssa_milano",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/kfplj/profile/s=w1200/o=95/HzGryvTSRjmBbLSzO760_alyssa_milano.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"James Franco",url:"http://www.funnyordie.com/james_franco",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/pkgqs/profile/Q2zmb8NQ4OZquDvs322p_james-franco-grinning-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"John Mayer",url:"http://www.funnyordie.com/johnmayer",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/legacy/profile/27019/john-mayer.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Kate Beckinsale",url:"http://www.funnyordie.com/kate_beckinsale",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/legacy/profile/1257682/c7243eabd61c99f2d76b8388468732c2.",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Kristen Bell",url:"http://www.funnyordie.com/kristen_bell",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/legacy/profile/182505/kristen-bell-heroes-1.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Lindsay Lohan",url:"http://www.funnyordie.com/lindsay_lohan",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/lgmuj/profile/I46bjV1KSZiXUIOCRNYm_lindsay-lohan-head-shot.jpeg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Marion Cotillard",url:"http://www.funnyordie.com/marion_cotillard",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/sfivm/profile/zW4AAyQYTGPj3Am1YgFP_marion-cotillard-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Natalie Portman",url:"http://www.funnyordie.com/natalie_portman",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/ahbay/profile/rbsbUxHkTmVRX4IqRSc8_natalie-portman-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Olivia Munn",url:"http://www.funnyordie.com/oliviamunn",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/legacy/profile/267235/amp_SemiPro_BP_036.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Nick Offerman",url:"http://www.funnyordie.com/nick_offerman",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/idvfk/profile/HNzGpuGQZ6NvNJyV9dZl_nick-offerman-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Jack Black",url:"http://www.funnyordie.com/jackblack",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/bhidf/profile/VTl0LoRzRaWkYbzqR2gC_jack-black-head-shot-2.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Paris Hilton",url:"http://www.funnyordie.com/paris_hilton",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/uuxix/profile/c8dgXcBTqOd2wc2IV54s_paris-hilton-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Ron Howard",url:"http://www.funnyordie.com/ron_howard",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/legacy/profile/995927/ronhoward.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Ryan Reynolds",url:"http://www.funnyordie.com/ryan_reynolds",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/legacy/profile/1051200/tn2_ryan_reynolds_3.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Sarah Silverman",url:"http://www.funnyordie.com/sarah_silverman",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/jefvg/profile/s=w1200/o=95/irMbr7L8TDyUbJoWd5Dg_sarah_silverman.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Selena Gomez",url:"http://www.funnyordie.com/selena_gomez",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/vslti/profile/76hHNpj6SMmGgdg2P6JA_selena-gomez-head-shot.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Will Arnett",url:"http://www.funnyordie.com/willarnett",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/legacy/profile/110964/175px-will_arnett.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}},{title:"Zac Efron",url:"http://www.funnyordie.com/zac_efron",img:"http://r.fod4.com/c=sq/s=h250,pd1/o=80/http://p.fod4.com/p/channels/legacy/profile/1040659/zacprofile.jpg",type:s.global.FOLDER,system:{type:s.system.VIDEO_LIST}}]}},function(e,t,i){"use strict";function s(e){n.call(this),this.data=e||{}}var n=i(7);s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.idName="id",s.prototype.clear=function(){var e=this.data;return Object.keys(e).length>0?(this.data={},this.events.clear&&this.emit("clear",{data:e}),!0):!1},s.prototype.init=function(e){return e?(this.clear(),this.data=e,this.events.init&&this.emit("init",{data:e}),!0):!1},s.prototype.has=function(e){return this.data.hasOwnProperty(e)},s.prototype.get=function(e){return this.data[e]},s.prototype.set=function(e,t){var i=e in this.data,s={name:e,curr:t};return i?(s.prev=this.data[e],t!==s.prev?(this.data[e]=t,this.events.change&&this.emit("change",s),!0):!1):(this.data[e]=t,this.events.change&&this.emit("change",s),!0)},s.prototype.unset=function(e){var t,i=e in this.data;return i?(t={name:e,prev:this.data[e]},delete this.data[e],this.events.change&&this.emit("change",t),!0):!1},e.exports=s},function(e,t,i){"use strict";function s(e){var t=this;this.isPLaying=!1,this.isPause=!1,this.totalDuration="",this.totalDurationSec=0,this.currentTime="",this.currentSec=0,this.rewindHelper={isActive:!1,startTime:0,time:0,timeout:0,duration:void 0,timeoutDuration:!1},this.setModeHelper={active:!1,timeout:0,time:0,timeStr:"",count:0,length:0,sec:0,timeoutDuration:0},this.audioPIDs=[],this.currentAudioPID=0,this.activeAspect=0,this.subtitlePIDs=[],this.currentSubtitle=null,this.durationInterval=0,this.allowInputPosition=!0,e=e||{},a.call(this,e),this.$node.classList.add("player"),this.init(e),n.addListener("media",function(e){s.prototype.mediaListener.call(t,e)})}var n=i(5),o=i(1),a=i(2);s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.ASPECT_TYPE_FIT=16,s.prototype.ASPECT_TYPE_BIG=64,s.prototype.ASPECT_TYPE_OPTIMAL=80,s.prototype.ASPECT_TYPE_ZOOM=0,s.prototype.aspects=[{name:"fit",mode:s.prototype.ASPECT_TYPE_FIT},{name:"big",mode:s.prototype.ASPECT_TYPE_BIG},{name:"opt",mode:s.prototype.ASPECT_TYPE_OPTIMAL},{name:"exp",mode:s.prototype.ASPECT_TYPE_ZOOM}],s.prototype.STEREO_MODE_OFF=0,s.prototype.STEREO_MODE_OVER_UNDER=1,s.prototype.STEREO_MODE_OVER_UNDER_HD=2,s.prototype.STEREO_MODE_SIDE_BY_SIDE=3,s.prototype.stereoModes=[{mode:s.prototype.STEREO_MODE_OFF,name:"Off"},{mode:s.prototype.STEREO_MODE_OVER_UNDER,name:"Over-Under"},{mode:s.prototype.STEREO_MODE_OVER_UNDER_HD,name:"Over-Under HD"},{mode:s.prototype.STEREO_MODE_SIDE_BY_SIDE,name:"Side-by-side"}],s.prototype.defaultEvents={keydown:function(e){switch(e.code){case o.ok:case o.playPause:this.playPause();break;case o.stop:this.stop();break;case o.forward:case o.right:this.rewind(!0);break;case o.rewind:case o.left:this.rewind(!1);break;case o.f4:case 117:this.nextAspect();break;case o.f1:this.nextAudioTrack();break;case o.f2:this.nextSubtitle();break;case o.f3:this.nextViewMode();break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 58:this.inputPosition(e.code)}}},s.prototype.mediaListener=function(e){var t,i,s,o,a,r,c=this,l={};switch(e.code){case n.EVENT_PLAYBACK_BEGIN:c.isPLaying=!0,c.durationInterval&&(clearInterval(c.durationInterval),c.durationInterval=0),c.durationInterval=setInterval(function(){c.events.duration&&(c.currentSec=gSTB.GetPosTime(),i=c.parseTime(c.currentSec),c.currentTime=(i.hour>0?i.hour+":":"")+i.min+":"+i.sec,c.emit("duration",{sec:c.currentSec,time:c.currentTime}))},1e3);break;case n.EVENT_GET_MEDIA_INFO:c.totalDurationSec=gSTB.GetMediaLen(),c.totalDurationSec>3600?c.setModeHelper.length=6:c.setModeHelper.length=4,t=c.parseTime(gSTB.GetMediaLen()),c.totalDuration=(t.hour>0?t.hour+":":"")+t.min+":"+t.sec,l.totalDuration=c.totalDuration,l.totalDurationSec=c.totalDurationSec;try{a=gSTB.GetAudioPIDs().replace(/pid:/g,'"pid":').replace(/lang:/g,'"lang":'),c.audioPIDs=JSON.parse(a)}catch(d){}try{r=gSTB.GetSubtitlePIDs().replace(/pid:/g,'"pid":').replace(/lang:/g,'"lang":'),c.subtitlePIDs=JSON.parse(r)}catch(d){}c.currentAudioPID=0,""!==c.audioPIDs[0].lang[0]?l.audioPid=c.audioPIDs[0].lang[0]:l.audioPid=void 0,c.currentSubtitle=null,l.subtitles=null,l.stereoMode={type:gSTB.Get3DConversionMode(),name:c.stereoModes[gSTB.Get3DConversionMode()].name},c.events["get:info"]&&c.emit("get:info",l);break;case n.EVENT_CONTENT_ERROR:c.isPLaying=!1,c.events["content:error"]&&c.emit("content:error");break;case n.EVENT_END_OF_FILE:c.currentSec=c.totalDurationSec,c.isPLaying=!1,c.events["content:end"]&&c.emit("content:end");break;case n.EVENT_SUBTITLE_LOAD_ERROR:c.subtitlePIDs.pop();break;case n.EVENT_HDMI_DISCONNECT:if(s=parseInt(JSON.parse(gSTB.GetEnv('{"varList":["hdmi_event_delay"]}')).result.hdmi_event_delay,10),0===s)return;c.hdmiEventTimeout=setTimeout(function(){c.isPLaying&&stbStorage.setItem("standByPlayback",JSON.stringify({url:c.playUrl,position:c.currentSec})),gSTB.StandBy(!0),c.hdmiEventTimeout=null},s);break;case n.EVENT_HDMI_CONNECT:if(s=parseInt(JSON.parse(gSTB.GetEnv('{"varList":["hdmi_event_delay"]}')).result.hdmi_event_delay,10),0===s)return;if(c.hdmiEventTimeout)return clearTimeout(c.hdmiEventTimeout),void(c.hdmiEventTimeout=null);gSTB.StandBy(!1),o=JSON.parse(stbStorage.getItem("standByPlayback")),s&&(c.play(o.url,{position:o.position}),stbStorage.removeItem("standByPlayback"))}},s.prototype.init=function(e){e.allowInputPosition&&(this.allowInputPosition=e.allowInputPosition),e.rewindDuration&&(this.rewindHelper.duration=e.rewindDuration),e.rewindTimeout&&(this.rewindHelper.timeoutDuration=e.rewindTimeout),e.inputPositionTimeout&&(this.setModeHelper.timeoutDuration=e.inputPositionTimeout),gSTB.InitPlayer(),gSTB.SetAspect(16),gSTB.SetVideoControl(0),gSTB.SetVideoState(0),gSTB.SetMode(0),gSTB.SetWinAlphaLevel(0,255),gSTB.SetWinAlphaLevel(1,255),gSTB.SetPIG(1,0,0,0),gSTB.Set3DConversionMode(0),gSTB.SetTopWin(0)},s.prototype.play=function(e,t){var i,s;this.totalDurationSec=0,this.currentSec=0,this.playUrl=e,t=t||{},i=t.solution?t.solution:"auto",s=" position:"+t.position,gSTB.Play(i+" "+e+s,t.proxy)},s.prototype.stop=function(){gSTB.Stop(),clearInterval(this.durationInterval),this.isPLaying=!1,this.isPause=!1},s.prototype.playPause=function(){this.isPause?gSTB.Continue():gSTB.Pause(),this.isPause=!this.isPause,this.events.pause&&this.emit("pause",{state:this.isPause})},s.prototype.rewind=function(e,t){var i,s=this;t=t||this.rewindHelper.duration||15,this.rewindHelper.isActive||(this.currentSec=gSTB.GetPosTime(),i=s.parseTime(s.currentSec),this.currentTime=(i.hour>0?i.hour+":":"")+i.min+":"+i.sec,this.rewindHelper.isActive=!0,this.rewindHelper.startTime=this.currentSec,this.rewindHelper.time=this.currentSec,this.events["rewind:start"]&&this.emit("rewind:start")),e?this.rewindHelper.time+t<this.totalDurationSec?this.rewindHelper.time+=t:this.rewindHelper.time=this.totalDurationSec:this.rewindHelper.time-t>0?this.rewindHelper.time-=t:this.rewindHelper.time=0,this.rewindHelper.timeout&&clearTimeout(this.rewindHelper.timeout),this.events.rewind&&this.emit("rewind",{time:this.rewindHelper.time,shift:this.rewindHelper.time-this.rewindHelper.startTime}),this.rewindHelper.timeoutDuration?this.rewindHelper.timeout=setTimeout(function(){return clearInterval(s.durationInterval),s.durationInterval=0,s.rewindHelper.isActive=!1,s.events["rewind:apply"]&&s.emit("rewind:apply"),s.currentSec=s.rewindHelper.time,s.rewindHelper.timeout=0,s.rewindHelper.time===s.totalDurationSec?void(s.events["content:end"]&&s.emit("content:end")):void gSTB.SetPosTime(s.rewindHelper.time)},this.rewindHelper.timeoutDuration):(clearInterval(s.durationInterval),s.durationInterval=0,gSTB.SetPosTime(s.rewindHelper.time),s.currentSec=s.rewindHelper.time,s.rewindHelper.isActive=!1,s.events["rewind:apply"]&&s.emit("rewind:apply"))},s.prototype.nextAudioTrack=function(){return this.audioPIDs.length<=1?!1:(this.currentAudioPID<this.audioPIDs.length-1?this.currentAudioPID++:this.currentAudioPID=0,gSTB.SetAudioPID(this.audioPIDs[this.currentAudioPID].pid),this.events["audio:track"]&&this.emit("audio:track",{lang:this.audioPIDs[this.currentAudioPID].lang[0],pid:this.audioPIDs[this.currentAudioPID].pid}),!0)},s.prototype.setAudioTrack=function(e){gSTB.SetAudioPID(this.audioPIDs[e].pid),this.currentAudioPID=e,this.events["audio:track"]&&this.emit("audio:track",{lang:this.audioPIDs[this.currentAudioPID].lang[0],pid:this.audioPIDs[this.currentAudioPID].pid})},s.prototype.nextAspect=function(){this.activeAspect++,this.activeAspect>this.aspects.length-1&&(this.activeAspect=0),gSTB.SetAspect(this.aspects[this.activeAspect].mode),this.events["aspect:change"]&&this.emit("aspect:change",{type:this.aspects[this.activeAspect].mode,name:this.aspects[this.activeAspect].name})},s.prototype.setAspect=function(e){this.activeAspect=e,gSTB.SetAspect(this.aspects[this.activeAspect].mode),this.events["aspect:change"]&&this.emit("aspect:change",{type:this.aspects[this.activeAspect].type,name:this.aspects[this.activeAspect].name})},s.prototype.nextSubtitle=function(){return this.subtitlePIDs.length<=0?(this.events["subtitles:change"]&&this.emit("subtitles:change",null),!1):(null===this.currentSubtitle?this.currentSubtitle=0:this.currentSubtitle<this.subtitlePIDs.length-1?this.currentSubtitle++:this.currentSubtitle=null,null!==this.currentSubtitle?(gSTB.SetSubtitlePID(this.subtitlePIDs[this.currentSubtitle].pid),gSTB.SetSubtitles(!0),this.events["subtitles:change"]&&this.emit("subtitles:change",{lang:this.subtitlePIDs[this.currentSubtitle].lang[0],pid:this.subtitlePIDs[this.currentSubtitle].pid})):(gSTB.SetSubtitles(!1),this.events["subtitles:change"]&&this.emit("subtitles:change",null)),!0)},s.prototype.setSubtitle=function(e){gSTB.SetSubtitlePID(this.subtitlePIDs[e].pid),gSTB.SetSubtitles(!0),this.currentSubtitle=e,this.events["subtitles:change"]&&this.emit("subtitles:change",{lang:this.subtitlePIDs[this.currentSubtitle].lang[0],pid:this.subtitlePIDs[this.currentSubtitle].pid})},s.prototype.hideSubtitles=function(){gSTB.SetSubtitles(!1),this.events["subtitles:change"]&&this.emit("subtitles:change",null)},s.prototype.loadExternalSubtitle=function(e){e&&"string"==typeof e&&(gSTB.LoadExternalSubtitles(e),this.subtitlePIDs.push({pid:8192}),this.events["subtitles:load"]&&this.emit("subtitles:load",null))},s.prototype.nextViewMode=function(){var e=gSTB.Get3DConversionMode();3>e?e++:e=0,gSTB.Set3DConversionMode(e),this.events["viewmode:change"]&&this.emit("viewmode:change",{type:this.stereoModes[e].mode,name:this.stereoModes[e].name})},s.prototype.setViewMode=function(e){e>0&&3>=e&&(gSTB.Set3DConversionMode(e),this.events["viewmode:change"]&&this.emit("viewmode:change",{type:this.stereoModes[e].mode,name:this.stereoModes[e].name}))},s.prototype.inputPosition=function(e){var t,i,s,n,o,a=this,r=parseInt(e,10)-48,c=[],l=0;this.allowInputPosition&&(this.setModeHelper.active||(6===this.setModeHelper.length?this.setModeHelper.time=[0,0,0,0,0,0]:this.setModeHelper.time=[0,0,0,0],this.setModeHelper.count=0,this.setModeHelper.active=!0,6===this.setModeHelper.length?this.events["position:input"]&&this.emit("position:input",{time:"00:00:00",start:!0,sec:0}):this.events["position:input"]&&this.emit("position:input",{time:"00:00",start:!0,sec:0})),this.setModeHelper.count<=this.setModeHelper.length&&(this.setModeHelper.time.shift(),this.setModeHelper.time.push(r),c=this.setModeHelper.time.slice(0,this.setModeHelper.length+1),6===this.setModeHelper.length?this.setModeHelper.timeStr=c[0].toString()+c[1].toString()+":"+c[2].toString()+c[3].toString()+":"+c[4].toString()+c[5].toString():this.setModeHelper.timeStr=c[0].toString()+c[1].toString()+":"+c[2].toString()+c[3].toString(),this.setModeHelper.count++,6===this.setModeHelper.length&&(s=c.shift()+c.shift().toString(),l+=3600*parseInt(s,10)),n=c.shift()+c.shift().toString(),l+=60*parseInt(n,10),o=c.shift()+c.shift().toString(),l+=parseInt(o,10),l>this.totalDurationSec&&(l=this.totalDurationSec),this.setModeHelper.sec=l,this.events["position:input"]&&this.emit("position:input",{time:a.setModeHelper.timeStr,sec:l})),clearTimeout(this.setModeHelper.timeout),t=this.setModeHelper.timeoutDuration?this.setModeHelper.timeoutDuration:2e3,this.setModeHelper.timeout=setTimeout(function(){a.setModeHelper.active=!1,clearInterval(a.durationInterval),a.durationInterval=0,gSTB.SetPosTime(a.setModeHelper.sec),a.currentSec=a.setModeHelper.sec,i=a.parseTime(a.currentSec),a.currentTime=(i.hour>0?i.hour+":":"")+i.min+":"+i.sec,a.events["position:input"]&&a.emit("position:input",{time:a.setModeHelper.timeStr,sec:a.setModeHelper.sec,end:!0})},t))},s.prototype.setPosition=function(e){var t;gSTB.SetPosTime(e),this.currentSec=e,t=self.parseTime(self.currentSec),this.currentTime=(t.hour>0?t.hour+":":"")+t.min+":"+t.sec,this.events["position:set"]&&this.emit("position:set",{sec:e})},s.prototype.parseTime=function(e){var t,i,s;return e>=0?(t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),s=e-3600*t-60*i,10>t&&(t="0"+t),10>s&&(s="0"+s),10>i&&(i="0"+i)):(e=Math.abs(e),t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),s=e-3600*t-60*i,10>t&&(t="0"+t),10>s&&(s="0"+s),10>i&&(i="0"+i),t="-"+t),{hour:t,min:i,sec:s}},s.prototype.addListener=function(e,t){var i;a.prototype.addListener.call(this,e,t),"duration"===e&&(this.currentSec=gSTB.GetPosTime(),i=this.parseTime(this.currentSec),this.currentTime=(i.hour>0?i.hour+":":"")+i.min+":"+i.sec,this.emit("duration",{sec:this.currentSec,time:this.currentTime}))},e.exports=s},function(e,t,i){"use strict";function s(e){"error"===e.type,a--,r[this.group]--,o.events.link&&o.emit("link",{url:this.src,group:this.group}),0===r[this.group]&&o.events.group&&o.emit("group",{name:this.group}),0===a&&o.events.done&&o.emit("done")}var n=i(7),o=new n,a=0,r={};o.add=function(e){e.forEach(function(e){var t=new Image,i=e.url||e,n=e.group||"";a++,r[n]=void 0===r[n]?1:r[n]+1,t.src=i,t.group=n,t.onload=t.onerror=t.ontimeout=s})},e.exports=o},function(e,t){"use strict";if(!("classList"in document.documentElement)){var i=Array.prototype,s=i.indexOf,n=i.slice,o=i.push,a=i.splice,r=i.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,i=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<i.length;t++)o.call(this,i[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(o.call(this,e),this._element.className=n.call(this,0).join(" "))},contains:function(e){return-1!==s.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var t=s.call(this,e);-1!==t&&(a.call(this,t,1),this._element.className=n.call(this,0).join(" "))},toString:function(){return r.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,i){"use strict";function s(e){e=e||{},this.value="",this.type=this.TYPE_TEXT,e.className="input "+(e.className||""),n.call(this,e),this.$line=this.$body.appendChild(document.createElement("div")),this.$line.className="line",this.$caret=this.$line.appendChild(document.createElement("div")),this.$caret.className="caret",this.$placeholder=this.$line.appendChild(document.createElement("div")),this.$placeholder.className="placeholder",this.$caret.index=0,this.init(e)}var n=i(2),o=i(1);s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.TYPE_TEXT=0,s.prototype.TYPE_PASSWORD=1,s.prototype.defaultEvents={keypress:function(e){this.addChar(String.fromCharCode(e.keyCode),this.$caret.index)},keydown:function(e){switch(e.code){case o["delete"]:this.removeChar(this.$caret.index);break;case o.back:this.removeChar(this.$caret.index-1);break;case o.left:this.setCaretPosition(this.$caret.index-1);break;case o.right:this.setCaretPosition(this.$caret.index+1);break;case o.end:case o.down:this.setCaretPosition(this.value.length);break;case o.home:case o.up:this.setCaretPosition(0)}}},s.prototype.init=function(e){e.type&&(this.type=e.type),e.value&&this.setValue(e.value),e.placeholder&&(this.$placeholder.innerText=e.placeholder),this.$line.dir=e.direction||"ltr"},s.prototype.addChar=function(e,t){var i=document.createElement("div");t=void 0===t?this.$caret.index:t,0===this.value.length&&this.$line.removeChild(this.$placeholder),i.className="char",this.value=this.value.substring(0,t)+e+this.value.substring(t,this.value.length),++this.$caret.index,this.type===this.TYPE_PASSWORD?i.innerText="*":" "===e?i.innerHTML="&nbsp;":i.innerText=e,t>=this.value.length?(this.$line.appendChild(i),this.$line.appendChild(this.$caret)):(this.$line.insertBefore(this.$caret,this.$line.children[t]),this.$line.insertBefore(i,this.$caret)),this.events.input&&this.emit("input",{value:this.value})},s.prototype.removeChar=function(e){var t=this.value;e=void 0===e?this.$caret.index-1:e,this.value.length>0&&(this.$caret.index===e&&e<this.value.length?this.$line.removeChild(this.$line.children[e+1]):this.$caret.index>e&&(--this.$caret.index,this.$line.removeChild(this.$line.children[e])),this.value=this.value.substring(0,e)+this.value.substring(e+1,this.value.length),this.events.input&&t!==this.value&&this.emit("input",{value:this.value})),0===this.value.length&&this.$line.appendChild(this.$placeholder)},s.prototype.setCaretPosition=function(e){e>=0&&e<=this.value.length&&this.$caret.index!==e&&(this.$line.removeChild(this.$caret),e===this.value.length?this.$line.appendChild(this.$caret):this.$line.insertBefore(this.$caret,this.$line.children[e]),this.$caret.index=e)},s.prototype.setValue=function(e){var t,i,s=this.value.length,n=e.length,o=0;if(e!==this.value){if(n>0){if(this.$placeholder.parentNode===this.$line&&this.$line.removeChild(this.$placeholder),this.$line.removeChild(this.$caret),n!==s)if(i=n-s,i>0)for(o=0;i>o;o++)t=this.$line.appendChild(document.createElement("div")),t.className="char";else for(o=0;o>i;o--)this.$line.removeChild(this.$line.lastChild);for(o=0;n>o;o++)t=this.$line.children[o],this.type===this.TYPE_PASSWORD?t.innerHTML="*":" "===e[o]?t.innerHTML="&nbsp;":t.innerText=e[o];this.value=e,this.$caret.index=n,this.$line.appendChild(this.$caret)}else this.value="",this.$line.innerText="",this.$line.appendChild(this.$caret),this.$line.appendChild(this.$placeholder);this.events.input&&this.emit("input",{value:this.value})}},e.exports=s},function(e,t,i){"use strict";function s(e){e=e||{},this.max=100,this.min=0,this.value=0,this.step=1,e.focusable=e.focusable||!1,e.className="progressBar "+(e.className||""),n.call(this,e),this.$value=this.$body.appendChild(document.createElement("div")),this.$value.className="value",this.init(e)}var n=i(2);s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.set=function(e){var t=this.value;return this.value!==e&&e<=this.max&&e>=this.min?(this.value=e,e=Math.abs(this.value-this.min)/this.step,100===e&&this.events.done&&this.emit("done"),this.$value.style.width=e+"%",this.events.change&&this.emit("change",{curr:this.value,prev:t}),!0):!1},s.prototype.init=function(e){void 0!==e.max&&(this.max=e.max),void 0!==e.min&&(this.min=e.min),void 0!==e.value&&(this.value=e.value),this.step=Math.abs(this.max-this.min)/100,this.$value.style.width=Math.abs(this.min-this.value)/this.step+"%"},e.exports=s},function(e,t){"use strict";e.exports={en:[[1,2,3,4,5,6,7,8,9,0,{value:"",id:"keyBackspace",img:"key.del",underline:"red"}],["q","w","e","r","t","y","u","i","o","p","@"],["a","s","d","f","g","h","j","k","l","_","&"],["z","x","c","v","b","n","m",",",".","-","?"],[{value:"En",id:"keyLang",underline:"yellow"},{value:"",id:"keyUp",img:"key.up"},{value:" ",id:"keySpace",colSpan:7},{value:"",id:"keyLeft",img:"key.left"},{value:"",id:"keyRight",img:"key.right"}]],ru:[[1,2,3,4,5,6,7,8,9,0,"@",{value:"",id:"keyBackspace",img:"key.del",underline:"red"}],["й","ц","у","к","е","н","г","ш","щ","з","х","ъ"],["ф","ы","в","а","п","р","о","л","д","ж","э","?"],["я","ч","с","м","и","т","ь","б","ю",",",".","-"],[{value:"Ру",id:"keyLang",underline:"yellow"},{value:"",id:"keyUp",img:"key.up"},{value:" ",id:"keySpace",colSpan:7},{value:"",id:"keyLeft",img:"key.left"},{value:"",id:"keyRight",img:"key.right"},{value:"",disable:!0}]]}},function(e,t){"use strict";e.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48,movieCount:2,movieImgSIze:{TYPE_GAMES:"90x120",TYPE_CONTENT:"220x120"},playerImgSize:"40x40"},576:{height:576,width:720,availTop:24,availBottom:24,availRight:28,availLeft:54,movieCount:2,movieImgSIze:{TYPE_GAMES:"90x120",TYPE_CONTENT:"220x120"},playerImgSize:"40x40"},720:{height:720,width:1280,availTop:20,availBottom:20,availRight:20,availLeft:20,movieCount:3,movieImgSIze:{TYPE_GAMES:"136x190",TYPE_CONTENT:"320x180"},playerImgSize:"60x60"},1080:{height:1080,width:1920,availTop:15,availBottom:15,availRight:15,availLeft:15,movieCount:5,movieImgSIze:{TYPE_GAMES:"270x380",TYPE_CONTENT:"320x180"},playerImgSize:"90x90"}}}]);